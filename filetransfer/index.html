<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="//thegeekyway.com/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="//thegeekyway.com/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="//thegeekyway.com/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="The Geeky Way">
  <meta name="description" content="Posts and writings by The Geeky Way">

  <link href="//thegeekyway.com/feed/all.atom.xml" type="application/atom+xml" rel="alternate" title="The Geeky Way Atom" />
  <link href="//thegeekyway.com/feed/index.html" type="application/rss+xml" rel="alternate" title="The Geeky Way RSS" />

<meta name="keywords" content="java, networking, sockets">

  <title>
    The Geeky Way
&ndash; Create your own Simple File Transfer App over LAN (with Source code in JAVA)  </title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-46055942-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="//thegeekyway.com">
        <img src="/uploads/images/tgw.png" alt="logo">
      </a>
      <h2><a href="//thegeekyway.com">The Geeky Way</a></h2>
      <p></p>
      <ul>
        <li><a href="/categories.html" target="_blank">Categories</a></li>
        <li><a href="/tags.html" target="_blank">Tags</a></li>
        <li><a href="/archives.html" target="_blank">Archives</a></li>
        <li><a href="/about-us/" target="_blank">About us</a></li>
        <li><a href="/authors.html" target="_blank">Authors</a></li>
        <hr>
        <p><b>Social Media</b></p>
        <a href="https://www.twitter.com/thegeekyway" target="_blank">
          <img src="/icons/twitter.png" style="width:25px;height:25px;border:0;">
        </a>
        <a href="https://www.facebook.com/thegeekyway" target="_blank">
          <img src="/icons/facebook.png" style="width:25px;height:25px;border:0;">
        </a>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      Technology Inside Out!
      <br><br>
      <a href="//thegeekyway.com">Index</a> &brvbar; <a href="//thegeekyway.com/archives.html">Archives</a>
      &brvbar; <a href="//thegeekyway.com/feed/all.atom.xml">Atom</a>
      &brvbar; <a href="//thegeekyway.com/feed/">RSS</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="//thegeekyway.com/filetransfer/">Create your own Simple File Transfer App over LAN (with Source code in JAVA)</a></h1>
  </div>
  <div class="article_author">
    <p><strong>By: <a href=//thegeekyway.com/author/gagan93/>gagan93</a></strong></p>
  </div>
  <div class="article_text">
    <p>Many Core Java packages can be used to create useful applications. This application uses java.net package to establish connection between two systems residing on the <strong>same network. </strong> This point is important, because it will not work for arbitrary networks (having no connection between them). For those who don't have basic networking knowledge, in the simplest language same network means computer systems connected through the same router, or directly connected to each other via <a href="http://www.pc.kg/Images/47/441657/441657.jpg" title="Lan Write">LAN Wire</a>.</p>
<p>Networking Basics : When we connect to a network (a router), we get an IP from the router, which is usually of the form xxx.xxx.x.x, where x is a no. between 0 to 255 like 192.168.1.5 or 192.168.0.5 . Usually the first address in the series is of the router itself, i.e. 192.168.1.1.<br>
In networking, there is a simple concept of a socket which is the combination of IP Address and Port number. Port no. is a is a no. between 0 to 65535. Out of this, 0 to 1023 are reserved for specific services and 1024 to 65536 can be used for our codes. In java, there are two classes which help in <strong>communication via these ports.</strong> These are namely, <strong>java.net.Socket</strong> and <strong>java.net.ServerSocket. </strong> Socket acts as a <strong>client</strong> and ServerSocket acts as a <strong>server.</strong></p>
<p>This simple software uses these two classes to send and receive files. ServerSocket opens a port on a system and waits for a client to connect to that port. On the other end, a system on the same network uses Socket class to connect to this device to establish connection and recieve data. The serveris currently able to send one file at a time to client.</p>
<p>The image shown below shows both the Client and Server side applications :</p>
<div style="text-align:center">
<p><a href="//thegeekyway.com/uploads/images/2014/01/server.jpg"><img alt="server" src="//thegeekyway.com/uploads/images/2014/01/server.jpg"></a></p>
</div>
<p>The Server Side Application has options to select the file to be sent and then press the button "Send File". For the client side, it has a text field where we enter the address specified by the server (which is 192.168.1.6 here). The default location where the client saves the file is <strong>Desktop</strong> of the user but the user can change the path where these files are saved after downloading. But, protected paths like <strong>C:</strong> and <strong>C:Program Files</strong> should be avoided as the destination paths, else an error is shown and Client shutdowns. The default location is then reset again to <strong>Desktop.<br>
</strong></p>
<p>A simple setup using <strong>Batch script, VB Script,Registry Script and Winrar</strong> was created to deploy the JAR file onto Windows Systems both 32 and 64 bit. <u><strong>JRE/ JDK 1.4 or above should be installed to use this application</strong></u>. You can try this application on your same system (local server) by using 127.0.0.1 as server address on client side.After installation on windows system, you will get these options on Right Click of each file/folder (called as context menu), which allows instant sharing as shown below.</p>
<div style="text-align:center">
<p><a href="//thegeekyway.com/uploads/images/2014/01/2.jpg" title="Screenshot of Installed Program"><img alt="Screenshot of Installed Program" src="//thegeekyway.com/uploads/images/2014/01/2.jpg"></a></p>
</div>
<p><a href="https://www.mediafire.com/download/6nscpopqnc4n57n/Smart%20File%20Transfer.exe" title="Smart file transfer download">Download the application from here</a></p>
<p style="text-decoration: underline;">**SOURCE **</p>

<p>Client side source code (Client.java) :</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.util.StringTokenizer</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.io.</span><span class="o">*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.net.</span><span class="o">*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.</span><span class="o">*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.awt.</span><span class="o">*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.</span><span class="o">*</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">Client</span> <span class="n">extends</span> <span class="n">JFrame</span> <span class="n">implements</span> <span class="n">ActionListener</span>
<span class="p">{</span>
    <span class="n">JTextField</span> <span class="n">address</span><span class="p">;</span>
    <span class="n">JButton</span> <span class="n">recieve</span><span class="p">;</span>
    <span class="n">JLabel</span> <span class="n">status</span><span class="p">,</span><span class="n">title</span><span class="p">;</span>
    <span class="nb">int</span> <span class="n">screenX</span><span class="p">,</span><span class="n">screenY</span><span class="p">,</span><span class="n">myX</span><span class="p">,</span><span class="n">myY</span><span class="p">;</span>
    <span class="n">JPanel</span> <span class="n">lowerBorder</span><span class="p">;</span>
    <span class="n">JProgressBar</span> <span class="n">jpb</span><span class="p">;</span>
    <span class="n">String</span> <span class="n">location</span><span class="p">;</span> <span class="o">//</span> <span class="n">represents</span> <span class="n">location</span> <span class="n">where</span> <span class="n">downloaded</span> <span class="nb">file</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">be</span> <span class="n">saved</span>
    <span class="n">private</span> <span class="n">void</span> <span class="n">setFont</span><span class="p">(</span><span class="n">Font</span> <span class="n">f</span><span class="p">,</span><span class="n">JComponent</span><span class="o">...</span><span class="n">c</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="n">JComponent</span> <span class="n">C</span><span class="p">:</span><span class="n">c</span><span class="p">)</span>
            <span class="n">C</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">private</span> <span class="n">void</span> <span class="n">add</span><span class="p">(</span><span class="n">JComponent</span> <span class="n">parent</span><span class="p">,</span><span class="n">JComponent</span> <span class="n">component</span><span class="p">,</span><span class="nb">int</span> <span class="n">gridx</span><span class="p">,</span> <span class="nb">int</span> <span class="n">gridy</span><span class="p">,</span> <span class="nb">int</span> <span class="n">gridwidth</span><span class="p">,</span> <span class="nb">int</span> <span class="n">gridheight</span><span class="p">,</span><span class="nb">int</span> <span class="n">posInCell</span><span class="p">,</span><span class="n">Insets</span> <span class="n">insets</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">new</span> <span class="n">GridBagConstraints</span><span class="p">(</span><span class="n">gridx</span><span class="p">,</span> <span class="n">gridy</span><span class="p">,</span><span class="n">gridwidth</span><span class="p">,</span> <span class="n">gridheight</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">posInCell</span><span class="p">,</span> <span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span> <span class="n">insets</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="n">Client</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="o">//</span> <span class="nb">set</span> <span class="n">Windows</span> <span class="n">Look</span> <span class="ow">and</span> <span class="n">Feel</span> <span class="k">for</span> <span class="n">Windows</span> <span class="n">Systems</span>
        <span class="k">try</span>
        <span class="p">{</span>
            <span class="n">UIManager</span><span class="o">.</span><span class="n">setLookAndFeel</span><span class="p">(</span><span class="s2">&quot;com.sun.java.swing.plaf.windows.WindowsLookAndFeel&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">catch</span><span class="p">(</span><span class="ne">Exception</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;Using Swing Default Look and Feel, as you a using a NON-WINDOWS System&quot;</span><span class="p">,</span><span class="s2">&quot;Changing look and feel&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">JButton</span> <span class="n">cross</span><span class="p">,</span><span class="n">minimize</span><span class="p">;</span>
        <span class="n">JPanel</span> <span class="n">upperBorder</span><span class="p">,</span><span class="n">panel</span><span class="p">,</span><span class="n">flowPanel</span><span class="p">;</span>
        <span class="n">JFileChooser</span> <span class="n">jfc</span><span class="p">;</span>
        <span class="n">final</span> <span class="n">JLabel</span> <span class="n">defaultLocation</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s2">&quot;Default location is : &quot;</span><span class="o">+</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">defLoc</span><span class="p">()));</span>
        <span class="n">final</span> <span class="n">JLabel</span> <span class="n">changeLocation</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s2">&quot;Change Location where downloaded file is saved &quot;</span><span class="p">);</span>

        <span class="n">address</span>   <span class="o">=</span> <span class="n">new</span> <span class="n">JTextField</span><span class="p">(</span><span class="s2">&quot;Enter Address as specified by Server&quot;</span><span class="p">);</span>
        <span class="n">recieve</span>   <span class="o">=</span> <span class="n">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s2">&quot;Recieve File&quot;</span><span class="p">);</span>
        <span class="p">(</span><span class="n">cross</span>    <span class="o">=</span> <span class="n">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">));</span>
        <span class="p">(</span><span class="n">minimize</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">));</span>
        <span class="p">(</span><span class="n">status</span>   <span class="o">=</span> <span class="n">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s2">&quot;Enter Server Adress and press &#39;Recieve File&#39; to Continue&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">);</span>
        <span class="p">(</span><span class="n">title</span>    <span class="o">=</span> <span class="n">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s2">&quot;  Smart File Transfer (Client)&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">);</span>
        <span class="n">jfc</span>       <span class="o">=</span> <span class="n">new</span> <span class="n">JFileChooser</span><span class="p">();</span>

        <span class="n">jpb</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JProgressBar</span><span class="p">();</span>
        <span class="n">jpb</span><span class="o">.</span><span class="n">setStringPainted</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
        <span class="n">jpb</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">new</span> <span class="n">Font</span><span class="p">(</span><span class="s2">&quot;Times new roman&quot;</span><span class="p">,</span><span class="n">Font</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span><span class="mi">20</span><span class="p">));</span>
        <span class="n">jpb</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">));</span>
        <span class="n">jpb</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);</span>

        <span class="n">panel</span>     <span class="o">=</span> <span class="n">new</span> <span class="n">JPanel</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">protected</span> <span class="n">void</span> <span class="n">paintComponent</span><span class="p">(</span><span class="n">Graphics</span> <span class="n">g</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nb">super</span><span class="o">.</span><span class="n">paintComponent</span><span class="p">(</span><span class="n">g</span><span class="p">);</span>
                <span class="n">Graphics2D</span> <span class="n">g2d</span> <span class="o">=</span> <span class="p">(</span><span class="n">Graphics2D</span><span class="p">)</span> <span class="n">g</span><span class="p">;</span>
                <span class="n">g2d</span><span class="o">.</span><span class="n">setRenderingHint</span><span class="p">(</span><span class="n">RenderingHints</span><span class="o">.</span><span class="n">KEY_RENDERING</span><span class="p">,</span> <span class="n">RenderingHints</span><span class="o">.</span><span class="n">VALUE_RENDER_QUALITY</span><span class="p">);</span>
                <span class="n">g2d</span><span class="o">.</span><span class="n">setPaint</span><span class="p">(</span><span class="n">new</span> <span class="n">GradientPaint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="n">getHeight</span><span class="p">(),</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">)));</span>
                <span class="n">g2d</span><span class="o">.</span><span class="n">fillRect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">getWidth</span><span class="p">(),</span> <span class="n">getHeight</span><span class="p">());</span>
            <span class="p">}</span>
        <span class="p">};</span>
        <span class="p">(</span><span class="n">upperBorder</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JPanel</span><span class="p">())</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);</span>
        <span class="p">(</span><span class="n">lowerBorder</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JPanel</span><span class="p">())</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);</span>
        <span class="p">(</span><span class="n">flowPanel</span>   <span class="o">=</span> <span class="n">new</span> <span class="n">JPanel</span><span class="p">())</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);</span>

        <span class="n">setFont</span><span class="p">(</span><span class="n">new</span> <span class="n">Font</span><span class="p">(</span><span class="s2">&quot;Times new roman&quot;</span><span class="p">,</span><span class="n">Font</span><span class="o">.</span><span class="n">PLAIN</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="n">status</span><span class="p">,</span><span class="n">recieve</span><span class="p">,</span><span class="n">title</span><span class="p">);</span>
        <span class="n">setFont</span><span class="p">(</span><span class="n">new</span> <span class="n">Font</span><span class="p">(</span><span class="s2">&quot;tahoma&quot;</span><span class="p">,</span><span class="n">Font</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="n">cross</span><span class="p">,</span><span class="n">minimize</span><span class="p">);</span>
        <span class="n">setFont</span><span class="p">(</span><span class="n">new</span> <span class="n">Font</span><span class="p">(</span><span class="s2">&quot;Times new roman&quot;</span><span class="p">,</span><span class="n">Font</span><span class="o">.</span><span class="n">PLAIN</span><span class="p">,</span><span class="mi">26</span><span class="p">),</span><span class="n">address</span><span class="p">);</span>

        <span class="n">panel</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">new</span> <span class="n">GridBagLayout</span><span class="p">());</span>
        <span class="n">upperBorder</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">new</span> <span class="n">BorderLayout</span><span class="p">());</span>
        <span class="n">lowerBorder</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">new</span> <span class="n">FlowLayout</span><span class="p">(</span><span class="n">FlowLayout</span><span class="o">.</span><span class="n">CENTER</span><span class="p">));</span>

        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">address</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">recieve</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">defaultLocation</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">WEST</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">changeLocation</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">WEST</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>

        <span class="n">flowPanel</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">minimize</span><span class="p">);</span>
        <span class="n">flowPanel</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cross</span><span class="p">);</span>
        <span class="n">upperBorder</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">flowPanel</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">EAST</span><span class="p">);</span>
        <span class="n">upperBorder</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">title</span><span class="p">);</span> <span class="o">//</span> <span class="ow">not</span> <span class="n">centered</span><span class="p">,</span> <span class="n">towards</span> <span class="n">left</span><span class="o">.</span>
        <span class="n">lowerBorder</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">upperBorder</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">NORTH</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">lowerBorder</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">SOUTH</span><span class="p">);</span>
        <span class="n">final</span> <span class="n">JTextField</span> <span class="n">temp</span><span class="o">=</span><span class="n">address</span><span class="p">;</span>
        <span class="n">addMouseListener</span><span class="p">(</span><span class="n">new</span> <span class="n">MouseAdapter</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">mousePressed</span><span class="p">(</span><span class="n">MouseEvent</span> <span class="n">me</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">screenX</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">getXOnScreen</span><span class="p">();</span>
                <span class="n">screenY</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">getYOnScreen</span><span class="p">();</span>
                <span class="n">myX</span>     <span class="o">=</span> <span class="n">getX</span><span class="p">();</span>
                <span class="n">myY</span>     <span class="o">=</span> <span class="n">getY</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="n">addMouseMotionListener</span><span class="p">(</span><span class="n">new</span> <span class="n">MouseMotionAdapter</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">mouseDragged</span><span class="p">(</span><span class="n">MouseEvent</span> <span class="n">me</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nb">int</span> <span class="n">deltaX</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">getXOnScreen</span><span class="p">()</span> <span class="o">-</span> <span class="n">screenX</span><span class="p">;</span>
                <span class="nb">int</span> <span class="n">deltaY</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">getYOnScreen</span><span class="p">()</span> <span class="o">-</span> <span class="n">screenY</span><span class="p">;</span>
                <span class="n">setLocation</span><span class="p">(</span><span class="n">myX</span> <span class="o">+</span> <span class="n">deltaX</span> <span class="p">,</span> <span class="n">myY</span> <span class="o">+</span> <span class="n">deltaY</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="n">address</span><span class="o">.</span><span class="n">addMouseListener</span><span class="p">(</span><span class="n">new</span> <span class="n">MouseAdapter</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">mouseClicked</span><span class="p">(</span><span class="n">MouseEvent</span> <span class="n">me</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
                <span class="n">temp</span><span class="o">.</span><span class="n">removeMouseListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="n">changeLocation</span><span class="o">.</span><span class="n">addMouseListener</span><span class="p">(</span><span class="n">new</span> <span class="n">MouseAdapter</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">mouseEntered</span><span class="p">(</span><span class="n">MouseEvent</span> <span class="n">me</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">changeLocation</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">mouseExited</span><span class="p">(</span><span class="n">MouseEvent</span> <span class="n">me</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">changeLocation</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">mouseClicked</span><span class="p">(</span><span class="n">MouseEvent</span> <span class="n">me</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">JFileChooser</span> <span class="n">jfc</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JFileChooser</span><span class="p">();</span>
                <span class="n">jfc</span><span class="o">.</span><span class="n">setFileSelectionMode</span><span class="p">(</span><span class="n">JFileChooser</span><span class="o">.</span><span class="n">DIRECTORIES_ONLY</span><span class="p">);</span>
                <span class="n">jfc</span><span class="o">.</span><span class="n">setCurrentDirectory</span><span class="p">(</span><span class="n">new</span> <span class="n">File</span><span class="p">(</span><span class="n">location</span><span class="p">));</span>
                <span class="nb">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">jfc</span><span class="o">.</span><span class="n">showSaveDialog</span><span class="p">(</span><span class="n">null</span><span class="p">);</span>
                <span class="k">if</span><span class="p">(</span><span class="n">ret</span> <span class="o">==</span> <span class="n">JFileChooser</span><span class="o">.</span><span class="n">APPROVE_OPTION</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="k">try</span>
                    <span class="p">{</span>
                        <span class="n">FileWriter</span> <span class="n">fw</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FileWriter</span><span class="p">(</span><span class="s2">&quot;c:\sft\log.bin&quot;</span><span class="p">);</span>
                        <span class="n">fw</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">jfc</span><span class="o">.</span><span class="n">getSelectedFile</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">());</span>
                        <span class="n">fw</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
                        <span class="n">defaultLocation</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Default Location is : &quot;</span><span class="o">+</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">jfc</span><span class="o">.</span><span class="n">getSelectedFile</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">()));</span>
                    <span class="p">}</span>
                    <span class="n">catch</span><span class="p">(</span><span class="ne">Exception</span> <span class="n">e</span><span class="p">)</span>
                    <span class="p">{</span>
                         <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;Error in changing path, The application will now exit&quot;</span><span class="p">,</span><span class="s2">&quot;Fatal Error&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="n">recieve</span><span class="o">.</span><span class="n">addActionListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
        <span class="n">cross</span><span class="o">.</span><span class="n">addActionListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
        <span class="n">minimize</span><span class="o">.</span><span class="n">addActionListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
        <span class="n">setResizable</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="n">setUndecorated</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
        <span class="n">setSize</span><span class="p">(</span><span class="mi">600</span><span class="p">,</span><span class="mi">300</span><span class="p">);</span>
        <span class="n">getRootPane</span><span class="p">()</span><span class="o">.</span><span class="n">setBorder</span><span class="p">(</span><span class="n">BorderFactory</span><span class="o">.</span><span class="n">createLineBorder</span><span class="p">(</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">),</span><span class="mi">5</span><span class="p">));</span>
        <span class="n">getRootPane</span><span class="p">()</span><span class="o">.</span><span class="n">setDefaultButton</span><span class="p">(</span><span class="n">recieve</span><span class="p">);</span>
        <span class="n">setLocationRelativeTo</span><span class="p">(</span><span class="n">null</span><span class="p">);</span>
        <span class="n">setDefaultCloseOperation</span><span class="p">(</span><span class="n">DISPOSE_ON_CLOSE</span><span class="p">);</span>
        <span class="n">setVisible</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
        <span class="n">requestFocus</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">private</span> <span class="n">String</span> <span class="n">defLoc</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">String</span> <span class="n">ret</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
        <span class="k">try</span>
        <span class="p">{</span>
            <span class="n">BufferedReader</span> <span class="n">br</span>  <span class="o">=</span> <span class="n">new</span> <span class="n">BufferedReader</span><span class="p">(</span><span class="n">new</span> <span class="n">FileReader</span><span class="p">(</span><span class="s2">&quot;c:\sft\log.bin&quot;</span><span class="p">));</span>
            <span class="n">String</span> <span class="n">s</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">readLine</span><span class="p">();</span>
            <span class="n">ret</span><span class="o">=</span><span class="n">s</span><span class="p">;</span>
            <span class="n">File</span> <span class="n">f</span> <span class="o">=</span> <span class="n">new</span> <span class="n">File</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="err">!</span><span class="n">f</span><span class="o">.</span><span class="n">isDirectory</span><span class="p">())</span>
                <span class="n">new</span> <span class="n">FileReader</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">catch</span><span class="p">(</span><span class="ne">Exception</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">e</span> <span class="n">instanceof</span> <span class="n">FileNotFoundException</span> <span class="o">||</span> <span class="n">e</span> <span class="n">instanceof</span> <span class="n">NullPointerException</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="n">FileWriter</span> <span class="n">fw</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FileWriter</span> <span class="p">(</span><span class="s2">&quot;c:\sft\log.bin&quot;</span><span class="p">);</span>
                    <span class="n">ret</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="n">getProperty</span><span class="p">(</span><span class="s2">&quot;user.home&quot;</span><span class="p">)</span><span class="o">+</span><span class="s2">&quot;\Desktop</span><span class="se">\&quot;</span><span class="s2">;</span>
                    <span class="n">fw</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">ret</span><span class="p">);</span>
                    <span class="n">fw</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="n">catch</span><span class="p">(</span><span class="ne">Exception</span> <span class="n">ee</span><span class="p">)</span>
                <span class="p">{</span>
          <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;Critical Error, The application will now exit&quot;</span><span class="p">,</span><span class="s2">&quot;Critical Error&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">ret</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">actionPerformed</span><span class="p">(</span><span class="n">ActionEvent</span> <span class="n">ae</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">String</span> <span class="n">com</span><span class="o">=</span><span class="n">ae</span><span class="o">.</span><span class="n">getActionCommand</span><span class="p">();</span>

        <span class="k">if</span><span class="p">(</span><span class="n">com</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>
            <span class="n">setState</span><span class="p">(</span><span class="n">JFrame</span><span class="o">.</span><span class="n">ICONIFIED</span><span class="p">);</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">com</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">))</span>
            <span class="n">System</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">com</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;Recieve File&quot;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="n">recieve</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
            <span class="nb">int</span> <span class="n">add</span><span class="p">[]</span> <span class="o">=</span> <span class="n">new</span> <span class="nb">int</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
            <span class="nb">int</span> <span class="n">counter</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
            <span class="n">StringTokenizer</span> <span class="n">st</span> <span class="o">=</span> <span class="n">new</span> <span class="n">StringTokenizer</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">getText</span><span class="p">(),</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
            <span class="k">while</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">hasMoreTokens</span><span class="p">())</span>
            <span class="p">{</span>
                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">counter</span><span class="o">&gt;=</span><span class="mi">4</span><span class="p">)</span>
                        <span class="n">new</span> <span class="n">Integer</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">);</span>
                    <span class="n">add</span><span class="p">[</span><span class="n">counter</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="n">new</span> <span class="n">Integer</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">nextToken</span><span class="p">());</span>
                <span class="p">}</span>
                <span class="n">catch</span><span class="p">(</span><span class="n">NumberFormatException</span> <span class="n">nfe</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">address</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
                    <span class="n">recieve</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
                    <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;IP address has only no.s seperated by dots (.)nIt is of the form &quot;</span><span class="n">xxx</span><span class="o">.</span><span class="n">xxx</span><span class="o">.</span><span class="n">xxx</span><span class="o">.</span><span class="n">xxx</span><span class="s2">&quot; nwhere xxx is a no. less than 256&quot;</span><span class="p">,</span><span class="s2">&quot;Integer Data Expected&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
                    <span class="k">return</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">if</span><span class="p">(</span>  <span class="err">!</span><span class="p">(</span><span class="n">counter</span> <span class="o">==</span> <span class="mi">4</span><span class="p">)</span> <span class="o">||</span> <span class="n">add</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">255</span> <span class="o">||</span> <span class="n">add</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">255</span> <span class="o">||</span> <span class="n">add</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">255</span> <span class="o">||</span> <span class="n">add</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">255</span> <span class="p">)</span>
            <span class="p">{</span>
                <span class="n">address</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
                <span class="n">recieve</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
                <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;Incorrect IP Address nIt is of the form &quot;</span><span class="n">xxx</span><span class="o">.</span><span class="n">xxx</span><span class="o">.</span><span class="n">xxx</span><span class="o">.</span><span class="n">xxx</span><span class="s2">&quot; nwhere xxx is a no. less than 256&quot;</span><span class="p">,</span><span class="s2">&quot;Invalid IP&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">new</span> <span class="n">Runnable</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="n">public</span> <span class="n">void</span> <span class="n">run</span><span class="p">()</span>
                <span class="p">{</span>
                    <span class="n">recieveFile</span><span class="p">();</span>
                <span class="p">}</span>
            <span class="p">})</span><span class="o">.</span><span class="n">start</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">private</span> <span class="n">void</span> <span class="n">recieveFile</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">SwingUtilities</span><span class="o">.</span><span class="n">invokeLater</span><span class="p">(</span><span class="n">new</span> <span class="n">Runnable</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">run</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Searching for server...Please wait&quot;</span><span class="p">);</span>
                <span class="n">address</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="n">byte</span> <span class="n">b</span><span class="p">[]</span> <span class="o">=</span> <span class="n">new</span> <span class="n">byte</span><span class="p">[</span><span class="mi">100000</span><span class="p">];</span>
        <span class="o">//</span> <span class="n">array</span> <span class="n">to</span> <span class="n">retrieve</span> <span class="n">data</span> <span class="kn">from</span> <span class="nn">server</span> <span class="nn">and</span> <span class="nn">send</span> <span class="nn">to</span> <span class="nn">client</span>

        <span class="n">String</span> <span class="n">sizeName</span><span class="p">[]</span> <span class="o">=</span> <span class="n">new</span> <span class="n">String</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
        <span class="o">//</span> <span class="n">stores</span> <span class="n">size</span> <span class="ow">and</span> <span class="n">name</span> <span class="n">of</span> <span class="nb">file</span> <span class="k">as</span> <span class="n">recieved</span> <span class="kn">from</span> <span class="nn">character</span> <span class="nn">streams</span>

        <span class="n">double</span> <span class="n">done</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">length</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">done</span> <span class="ow">is</span> <span class="n">used</span> <span class="n">to</span> <span class="n">count</span> <span class="n">the</span> <span class="n">percentage</span>

        <span class="nb">int</span> <span class="n">read</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">read</span> <span class="n">counts</span> <span class="n">the</span> <span class="nb">bytes</span> <span class="n">read</span> <span class="p">(</span><span class="n">within</span> <span class="mi">4</span> <span class="nb">bytes</span> <span class="n">integer</span> <span class="nb">range</span><span class="p">)</span> <span class="ow">in</span> <span class="n">WHILE</span> <span class="n">loop</span>

        <span class="o">//</span> <span class="n">constructing</span> <span class="n">streams</span>
        <span class="n">BufferedReader</span> <span class="n">br</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">to</span> <span class="n">read</span> <span class="n">String</span> <span class="ow">and</span> <span class="nb">long</span> <span class="n">data</span> <span class="n">via</span> <span class="n">Socket</span>

        <span class="n">PrintWriter</span> <span class="n">pw</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">to</span> <span class="n">write</span> <span class="n">String</span> <span class="ow">and</span> <span class="nb">long</span> <span class="n">data</span> <span class="n">via</span> <span class="n">Socket</span>

        <span class="n">BufferedInputStream</span> <span class="n">bis</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span><span class="n">to</span> <span class="n">write</span> <span class="nb">file</span> <span class="n">contents</span> <span class="p">(</span><span class="n">byte</span> <span class="n">stream</span><span class="p">)</span> <span class="n">via</span> <span class="n">Socket</span>

        <span class="n">BufferedOutputStream</span> <span class="n">bos</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span><span class="n">to</span> <span class="n">read</span> <span class="n">byte</span> <span class="n">data</span> <span class="n">via</span> <span class="n">Socket</span>

        <span class="n">FileOutputStream</span> <span class="n">fos</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">to</span> <span class="n">read</span> <span class="n">actual</span> <span class="nb">file</span> <span class="n">using</span> <span class="n">byte</span> <span class="n">stream</span>

        <span class="n">Socket</span> <span class="n">s</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">this</span> <span class="n">will</span> <span class="n">serve</span> <span class="n">a</span> <span class="n">local</span> <span class="n">port</span> <span class="k">for</span> <span class="n">a</span> <span class="n">client</span>

        <span class="o">//</span> <span class="n">now</span> <span class="n">allocating</span> <span class="n">memory</span> <span class="n">to</span> <span class="n">objects</span> <span class="ow">and</span> <span class="n">starting</span> <span class="n">main</span> <span class="n">logic</span>

        <span class="k">try</span>
        <span class="p">{</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Socket</span><span class="p">(</span><span class="n">address</span><span class="o">.</span><span class="n">getText</span><span class="p">(),</span><span class="mi">4000</span><span class="p">);</span>
            <span class="n">br</span> <span class="o">=</span> <span class="n">new</span> <span class="n">BufferedReader</span><span class="p">(</span><span class="n">new</span> <span class="n">InputStreamReader</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">getInputStream</span><span class="p">()));</span>
            <span class="n">pw</span> <span class="o">=</span> <span class="n">new</span> <span class="n">PrintWriter</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">getOutputStream</span><span class="p">());</span>
            <span class="n">StringTokenizer</span> <span class="n">st</span> <span class="o">=</span> <span class="n">new</span> <span class="n">StringTokenizer</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">readLine</span><span class="p">(),</span><span class="s2">&quot;/&quot;</span><span class="p">);</span>
            <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Connection Established, about to begin download&quot;</span><span class="p">);</span>
            <span class="k">while</span><span class="p">(</span><span class="n">st</span><span class="o">.</span><span class="n">hasMoreTokens</span><span class="p">())</span>
                <span class="n">sizeName</span><span class="p">[</span><span class="n">i</span><span class="o">++</span><span class="p">]</span><span class="o">=</span><span class="n">st</span><span class="o">.</span><span class="n">nextToken</span><span class="p">();</span>
            <span class="n">pw</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="s2">&quot;Recieved&quot;</span><span class="p">);</span>
            <span class="n">pw</span><span class="o">.</span><span class="n">flush</span><span class="p">();</span>
            <span class="n">length</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Double</span><span class="p">(</span><span class="n">sizeName</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
            <span class="n">bis</span> <span class="o">=</span> <span class="n">new</span> <span class="n">BufferedInputStream</span>  <span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">getInputStream</span><span class="p">());</span>
            <span class="n">bos</span> <span class="o">=</span> <span class="n">new</span> <span class="n">BufferedOutputStream</span> <span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">getOutputStream</span><span class="p">());</span>
            <span class="n">fos</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FileOutputStream</span>     <span class="p">(</span><span class="n">location</span><span class="o">+</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">+sizeName[0]);</span>

            <span class="n">lowerBorder</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
            <span class="n">remove</span><span class="p">(</span><span class="n">lowerBorder</span><span class="p">);</span>
            <span class="n">add</span><span class="p">(</span><span class="n">jpb</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">SOUTH</span><span class="p">);</span>
            <span class="n">repaint</span><span class="p">();</span>
            <span class="n">revalidate</span><span class="p">();</span>
            <span class="k">while</span><span class="p">(</span><span class="n">true</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">done</span><span class="o">+=</span><span class="n">read</span><span class="p">;</span>
                <span class="k">if</span><span class="p">(</span><span class="n">done</span><span class="o">&gt;=</span><span class="n">length</span><span class="p">)</span>
                    <span class="k">break</span><span class="p">;</span>
                <span class="n">read</span><span class="o">=</span><span class="n">bis</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
                <span class="n">ClientSwingWorker</span> <span class="n">csw</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ClientSwingWorker</span> <span class="p">(</span><span class="n">done</span><span class="p">,</span><span class="n">length</span><span class="p">,</span><span class="n">read</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">fos</span><span class="p">,</span><span class="n">jpb</span><span class="p">);</span>
                <span class="n">csw</span><span class="o">.</span><span class="n">execute</span><span class="p">();</span>
                <span class="k">while</span><span class="p">(</span><span class="err">!</span><span class="p">(</span><span class="n">csw</span><span class="o">.</span><span class="n">isDone</span><span class="p">()))</span> <span class="p">{}</span>
            <span class="p">}</span>
            <span class="n">fos</span><span class="o">.</span><span class="n">flush</span><span class="p">();</span>

            <span class="n">address</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
            <span class="n">recieve</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
            <span class="n">remove</span><span class="p">(</span><span class="n">jpb</span><span class="p">);</span>
            <span class="n">lowerBorder</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
            <span class="n">add</span><span class="p">(</span><span class="n">lowerBorder</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">SOUTH</span><span class="p">);</span>
            <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Recieved 100%&quot;</span><span class="p">);</span>
            <span class="n">repaint</span><span class="p">();</span>
            <span class="n">revalidate</span><span class="p">();</span>

            <span class="n">double</span> <span class="n">time</span>        <span class="o">=</span> <span class="n">new</span> <span class="n">Double</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">readLine</span><span class="p">());</span>
            <span class="n">String</span> <span class="n">speedString</span> <span class="o">=</span> <span class="n">br</span><span class="o">.</span><span class="n">readLine</span><span class="p">();</span>

            <span class="n">bis</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">bos</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">fos</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">pw</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">br</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>

            <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;Time taken is &quot;</span><span class="o">+</span><span class="n">time</span><span class="o">+</span><span class="s2">&quot;nSpeed is &quot;</span><span class="o">+</span><span class="n">speedString</span><span class="o">+</span><span class="s2">&quot; MBPS&quot;</span><span class="p">,</span><span class="s2">&quot;File Sent (Client)&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
            <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Enter Server Adress and press &#39;Recieve File&#39; to Continue&quot;</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">catch</span><span class="p">(</span><span class="ne">Exception</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">e</span> <span class="n">instanceof</span> <span class="n">ConnectException</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">address</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Enter Address as specified by Server&quot;</span><span class="p">);</span>
                <span class="n">status</span><span class="o">.</span><span class="n">setText</span> <span class="p">(</span><span class="s2">&quot;Enter Server Adress and press &#39;Connect and Start&#39; button to Continue&quot;</span><span class="p">);</span>
                <span class="n">address</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
                <span class="n">recieve</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
                <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;No Running Server found on specified address [ &quot;</span><span class="o">+</span><span class="n">address</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span><span class="o">+</span><span class="s2">&quot; ]&quot;</span><span class="p">,</span><span class="s2">&quot;Server Not Found&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
                <span class="n">final</span> <span class="n">JTextField</span> <span class="n">temp</span><span class="o">=</span><span class="n">address</span><span class="p">;</span>
                <span class="n">address</span><span class="o">.</span><span class="n">addMouseListener</span><span class="p">(</span><span class="n">new</span> <span class="n">MouseAdapter</span><span class="p">()</span>
                <span class="p">{</span>
                    <span class="n">public</span> <span class="n">void</span> <span class="n">mouseClicked</span><span class="p">(</span><span class="n">MouseEvent</span> <span class="n">me</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">temp</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
                        <span class="n">temp</span><span class="o">.</span><span class="n">removeMouseListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">});</span>
                <span class="k">return</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">e</span> <span class="n">instanceof</span> <span class="n">FileNotFoundException</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;Failed in saving file,nLocation : &quot;</span><span class="o">+</span><span class="n">location</span><span class="o">+</span><span class="s2">&quot; required administrative rights to save or it was an invalid pathnSelect some other location for downloaded filesnThe Program will now Exit and default location would be reset&quot;</span><span class="p">,</span><span class="s2">&quot;Error [&quot;</span><span class="o">+</span><span class="n">location</span><span class="o">+</span><span class="s2">&quot;]&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
                <span class="k">try</span>
                <span class="p">{</span>
                    <span class="n">FileWriter</span> <span class="n">fw</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FileWriter</span><span class="p">(</span><span class="s2">&quot;c:\sft\log.bin&quot;</span><span class="p">);</span>
                    <span class="n">fw</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
                <span class="p">}</span>
                <span class="n">catch</span><span class="p">(</span><span class="n">IOException</span> <span class="n">ee</span><span class="p">)</span>
                <span class="p">{</span>
                <span class="p">}</span>
                <span class="n">System</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">e</span><span class="o">.</span><span class="n">printStackTrace</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">String</span><span class="o">...</span><span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">SwingUtilities</span><span class="o">.</span><span class="n">invokeLater</span><span class="p">(</span><span class="n">new</span> <span class="n">Runnable</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">run</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="n">new</span> <span class="n">Client</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">class</span> <span class="nc">ClientSwingWorker</span> <span class="n">extends</span> <span class="n">SwingWorker</span><span class="o">&lt;</span><span class="n">void</span><span class="p">,</span><span class="n">void</span><span class="o">&gt;</span>
<span class="p">{</span>
    <span class="n">JProgressBar</span> <span class="n">jpb</span><span class="p">;</span>
    <span class="n">final</span> <span class="n">double</span> <span class="n">done</span><span class="p">,</span><span class="n">size</span><span class="p">;</span>
    <span class="n">byte</span> <span class="n">b</span><span class="p">[]</span> <span class="o">=</span> <span class="n">new</span> <span class="n">byte</span><span class="p">[</span><span class="mi">100000</span><span class="p">];</span>
    <span class="n">final</span> <span class="nb">int</span> <span class="n">read</span><span class="p">;</span>
    <span class="n">FileOutputStream</span> <span class="n">fos</span><span class="p">;</span>
    <span class="n">ClientSwingWorker</span><span class="p">(</span><span class="n">double</span> <span class="n">done</span><span class="p">,</span><span class="n">double</span> <span class="n">size</span><span class="p">,</span><span class="nb">int</span> <span class="n">read</span><span class="p">,</span><span class="n">byte</span> <span class="n">b</span><span class="p">[],</span><span class="n">FileOutputStream</span> <span class="n">fos</span><span class="p">,</span><span class="n">JProgressBar</span> <span class="n">jpb</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">done</span> <span class="o">=</span> <span class="n">done</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">read</span> <span class="o">=</span> <span class="n">read</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">b</span>    <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">jpb</span>  <span class="o">=</span> <span class="n">jpb</span> <span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">fos</span>  <span class="o">=</span> <span class="n">fos</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">protected</span> <span class="n">Void</span> <span class="n">doInBackground</span><span class="p">()</span> <span class="n">throws</span> <span class="ne">Exception</span>
    <span class="p">{</span>
        <span class="n">fos</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">read</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">protected</span> <span class="n">void</span> <span class="n">done</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">final</span> <span class="n">double</span> <span class="n">temp</span><span class="o">=</span><span class="p">(</span><span class="n">done</span><span class="o">/</span><span class="n">size</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">;</span>
        <span class="n">SwingUtilities</span><span class="o">.</span><span class="n">invokeLater</span><span class="p">(</span><span class="n">new</span> <span class="n">Runnable</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">run</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="n">String</span> <span class="n">tString</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Double</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">();</span>
                <span class="nb">int</span> <span class="n">index</span><span class="o">=</span><span class="n">tString</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
                <span class="nb">int</span> <span class="n">breakPoint</span><span class="o">=</span> <span class="p">(</span><span class="n">index</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span><span class="o">&gt;</span><span class="n">tString</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="err">?</span><span class="n">tString</span><span class="o">.</span><span class="n">length</span><span class="p">():(</span><span class="n">index</span><span class="o">+</span><span class="mi">3</span><span class="p">);</span>
                <span class="n">tString</span><span class="o">=</span><span class="n">tString</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">breakPoint</span><span class="p">);</span>
                <span class="n">jpb</span><span class="o">.</span><span class="n">setString</span><span class="p">(</span><span class="s2">&quot;Recieving : &quot;</span><span class="o">+</span><span class="n">tString</span><span class="o">+</span><span class="s2">&quot; %&quot;</span><span class="p">);</span>
                <span class="n">jpb</span><span class="o">.</span><span class="n">setValue</span><span class="p">((</span><span class="nb">int</span><span class="p">)</span><span class="n">temp</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Server Side code (Server.java):</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">java.io.</span><span class="o">*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.net.</span><span class="o">*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">javax.swing.</span><span class="o">*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.awt.</span><span class="o">*</span><span class="p">;</span>
<span class="kn">import</span> <span class="nn">java.awt.event.</span><span class="o">*</span><span class="p">;</span>
<span class="k">class</span> <span class="nc">Server</span> <span class="n">extends</span> <span class="n">JFrame</span> <span class="n">implements</span> <span class="n">ActionListener</span>
<span class="p">{</span>
    <span class="n">JTextField</span> <span class="n">nameField</span><span class="p">,</span><span class="n">sizeField</span><span class="p">,</span><span class="n">typeField</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">textfields</span> <span class="ow">in</span> <span class="n">front</span> <span class="n">Dialog</span>

    <span class="n">JButton</span> <span class="n">browse</span><span class="p">,</span><span class="n">start</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">browse</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">select</span> <span class="n">the</span> <span class="nb">file</span> <span class="ow">and</span> <span class="n">start</span> <span class="ow">is</span> <span class="n">to</span> <span class="n">start</span> <span class="n">the</span> <span class="n">server</span>

    <span class="n">JFileChooser</span> <span class="n">jfc</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">to</span> <span class="n">select</span> <span class="n">the</span> <span class="nb">file</span> <span class="kn">from</span> <span class="nn">local</span> <span class="nn">computer</span>

    <span class="n">JLabel</span> <span class="n">status</span><span class="p">,</span><span class="n">address</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">shows</span> <span class="n">current</span> <span class="n">status</span> <span class="n">of</span> <span class="n">the</span> <span class="n">app</span>

    <span class="n">JPanel</span> <span class="n">lowerBorder</span><span class="p">;</span>
    <span class="o">//</span> <span class="ow">is</span> <span class="n">removed</span> <span class="n">afterwards</span><span class="p">,</span> <span class="n">so</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">declared</span> <span class="n">class</span><span class="o">-</span><span class="n">wide</span>

    <span class="n">JProgressBar</span> <span class="n">jpb</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">progress</span> <span class="n">bar</span> <span class="n">to</span> <span class="n">show</span> <span class="nb">file</span> <span class="n">completion</span>

    <span class="n">final</span> <span class="n">String</span> <span class="n">sizeArray</span><span class="p">[]</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;B&quot;</span><span class="p">,</span><span class="s2">&quot;KB&quot;</span><span class="p">,</span><span class="s2">&quot;MB&quot;</span><span class="p">,</span><span class="s2">&quot;GB&quot;</span><span class="p">,</span><span class="s2">&quot;TB&quot;</span><span class="p">};</span>
    <span class="o">//</span> <span class="n">final</span> <span class="n">string</span> <span class="n">array</span> <span class="n">to</span> <span class="nb">set</span> <span class="n">the</span> <span class="n">size</span> <span class="n">of</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">desired</span> <span class="nb">range</span>

    <span class="nb">int</span> <span class="n">screenX</span><span class="p">,</span><span class="n">screenY</span><span class="p">,</span><span class="n">myX</span><span class="p">,</span><span class="n">myY</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">dialog</span> <span class="ow">is</span> <span class="n">undecorated</span><span class="p">,</span> <span class="n">so</span> <span class="n">these</span> <span class="n">coordinates</span> <span class="n">help</span> <span class="n">to</span> <span class="n">move</span> <span class="n">the</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">screen</span>

    <span class="n">boolean</span> <span class="n">startFlag</span><span class="o">=</span><span class="n">false</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">this</span> <span class="n">flag</span> <span class="n">sets</span> <span class="n">the</span> <span class="n">StartServer</span> <span class="n">button</span> <span class="s2">&quot;working&quot;</span>

    <span class="n">double</span> <span class="n">fileSize</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">stores</span> <span class="n">the</span> <span class="n">size</span> <span class="n">of</span> <span class="nb">file</span> <span class="ow">in</span> <span class="nb">bytes</span>

    <span class="n">String</span> <span class="n">serverAddress</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span><span class="n">tempAddress</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>
    <span class="o">//</span> <span class="n">string</span> <span class="n">stores</span> <span class="n">the</span> <span class="n">address</span> <span class="n">of</span> <span class="n">the</span> <span class="n">server</span><span class="p">,</span> <span class="n">determined</span> <span class="n">inside</span> <span class="n">constructor</span>

    <span class="n">private</span> <span class="n">void</span> <span class="n">add</span><span class="p">(</span><span class="n">JComponent</span> <span class="n">parent</span><span class="p">,</span><span class="n">JComponent</span> <span class="n">component</span><span class="p">,</span><span class="nb">int</span> <span class="n">gridx</span><span class="p">,</span> <span class="nb">int</span> <span class="n">gridy</span><span class="p">,</span> <span class="nb">int</span> <span class="n">gridwidth</span><span class="p">,</span> <span class="nb">int</span> <span class="n">gridheight</span><span class="p">,</span><span class="nb">int</span> <span class="n">posInCell</span><span class="p">,</span><span class="n">Insets</span> <span class="n">insets</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">parent</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">component</span><span class="p">,</span> <span class="n">new</span> <span class="n">GridBagConstraints</span><span class="p">(</span><span class="n">gridx</span><span class="p">,</span> <span class="n">gridy</span><span class="p">,</span><span class="n">gridwidth</span><span class="p">,</span> <span class="n">gridheight</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="n">posInCell</span><span class="p">,</span> <span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">NONE</span><span class="p">,</span> <span class="n">insets</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="o">//</span> <span class="n">GridBagLayout</span> <span class="n">alignment</span> <span class="ow">and</span> <span class="n">add</span> <span class="n">function</span>
    <span class="n">void</span> <span class="n">retrieveServerIP</span><span class="p">(</span><span class="n">boolean</span> <span class="n">flag</span><span class="p">)</span> <span class="o">//</span> <span class="n">flag</span> <span class="ow">is</span> <span class="n">false</span> <span class="n">when</span> <span class="n">it</span> <span class="ow">is</span> <span class="n">executed</span> <span class="k">for</span> <span class="n">first</span> <span class="n">time</span><span class="p">,</span> <span class="k">else</span> <span class="n">label</span> <span class="ow">is</span> <span class="n">updated</span>
    <span class="p">{</span>
        <span class="k">try</span>
        <span class="p">{</span>
            <span class="n">tempAddress</span> <span class="o">=</span> <span class="n">InetAddress</span><span class="o">.</span><span class="n">getLocalHost</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">InetAddress</span><span class="o">.</span><span class="n">getLocalHost</span><span class="p">()</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span><span class="o">.</span><span class="n">lastIndexOf</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">catch</span><span class="p">(</span><span class="ne">Exception</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">this</span><span class="p">,</span><span class="s2">&quot;Unable to Retrieve System IP, Restart the Application and Retry&quot;</span><span class="p">,</span><span class="s2">&quot;Runtime Error !&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span> <span class="o">//</span> <span class="n">EIWQ</span>
            <span class="n">System</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="err">!</span><span class="p">(</span><span class="n">tempAddress</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">serverAddress</span><span class="p">)))</span>
        <span class="p">{</span>
            <span class="n">serverAddress</span><span class="o">=</span><span class="n">tempAddress</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="n">flag</span><span class="p">)</span>
                <span class="n">SwingUtilities</span><span class="o">.</span><span class="n">invokeLater</span><span class="p">(</span><span class="n">new</span> <span class="n">Runnable</span><span class="p">()</span>
                <span class="p">{</span>
                    <span class="n">public</span> <span class="n">void</span> <span class="n">run</span><span class="p">()</span>
                    <span class="p">{</span>
                        <span class="n">address</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Type this in client app : &quot;</span><span class="o">+</span><span class="n">serverAddress</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="o">//</span> <span class="n">starting</span> <span class="n">constructor</span> <span class="k">for</span> <span class="n">basic</span> <span class="n">initializations</span>
    <span class="n">Server</span><span class="p">(</span><span class="n">String</span> <span class="n">path</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">this</span><span class="p">();</span>
        <span class="n">openFile</span><span class="p">(</span><span class="n">new</span> <span class="n">File</span><span class="p">(</span><span class="n">path</span><span class="p">));</span>
    <span class="p">}</span>
    <span class="n">Server</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="o">//</span> <span class="n">Retrieve</span> <span class="n">Server</span><span class="s1">&#39;s IP</span>
        <span class="n">retrieveServerIP</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="o">//</span> <span class="nb">set</span> <span class="n">Windows</span> <span class="n">Look</span> <span class="ow">and</span> <span class="n">Feel</span> <span class="k">for</span> <span class="n">Windows</span> <span class="n">Systems</span> <span class="p">(</span><span class="n">only</span> <span class="n">on</span> <span class="nb">file</span> <span class="n">chooser</span><span class="p">)</span>
        <span class="k">try</span>
        <span class="p">{</span>
            <span class="n">UIManager</span><span class="o">.</span><span class="n">setLookAndFeel</span><span class="p">(</span><span class="s2">&quot;com.sun.java.swing.plaf.windows.WindowsLookAndFeel&quot;</span><span class="p">);</span>
            <span class="n">SwingUtilities</span><span class="o">.</span><span class="n">updateComponentTreeUI</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">catch</span><span class="p">(</span><span class="ne">Exception</span> <span class="n">e</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;Using Swing Default Look and Feel, as you a using a NON-WINDOWS System&quot;</span><span class="p">,</span><span class="s2">&quot;Changing look and feel&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="o">//</span> <span class="n">Constructos</span> <span class="n">Declarations</span>
        <span class="n">JButton</span> <span class="n">cross</span><span class="p">,</span><span class="n">minimize</span><span class="p">;</span>
        <span class="n">JLabel</span> <span class="n">nameLabel</span><span class="p">,</span><span class="n">sizeLabel</span><span class="p">,</span><span class="n">typeLabel</span><span class="p">,</span><span class="n">title</span><span class="p">;</span>
        <span class="n">JPanel</span> <span class="n">panel</span><span class="p">,</span><span class="n">upperBorder</span><span class="p">,</span><span class="n">flowPanel</span><span class="p">;</span>

        <span class="o">//</span> <span class="n">Memory</span> <span class="n">allocation</span>

        <span class="p">(</span><span class="n">browse</span>   <span class="o">=</span> <span class="n">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);</span>
        <span class="p">(</span><span class="n">start</span>    <span class="o">=</span> <span class="n">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s2">&quot;Send File&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);</span>
        <span class="p">(</span><span class="n">cross</span>    <span class="o">=</span> <span class="n">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">));</span>
        <span class="p">(</span><span class="n">minimize</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JButton</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">));</span>
        <span class="n">cross</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">);</span>
        <span class="n">minimize</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">);</span>

        <span class="n">jfc</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JFileChooser</span><span class="p">();</span>

        <span class="n">jpb</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JProgressBar</span><span class="p">();</span>
        <span class="n">jpb</span><span class="o">.</span><span class="n">setStringPainted</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
        <span class="n">jpb</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">new</span> <span class="n">Font</span><span class="p">(</span><span class="s2">&quot;Times new roman&quot;</span><span class="p">,</span><span class="n">Font</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span><span class="mi">20</span><span class="p">));</span>
        <span class="n">jpb</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">));</span>
        <span class="n">jpb</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);</span>

        <span class="n">nameLabel</span>  <span class="o">=</span> <span class="n">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s2">&quot;File Name&quot;</span><span class="p">);</span>
        <span class="n">sizeLabel</span>  <span class="o">=</span> <span class="n">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s2">&quot;File Size&quot;</span><span class="p">);</span>
        <span class="n">typeLabel</span>  <span class="o">=</span> <span class="n">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s2">&quot;File Type&quot;</span><span class="p">);</span>
        <span class="p">(</span><span class="n">title</span>      <span class="o">=</span> <span class="n">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s2">&quot;  Smart File Transfer (Server)&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">);</span>
        <span class="n">address</span>    <span class="o">=</span> <span class="n">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s2">&quot;Type this in client app : &quot;</span><span class="o">+</span><span class="n">serverAddress</span><span class="o">+</span><span class="s2">&quot; &quot;</span><span class="p">);</span>
        <span class="p">(</span><span class="n">status</span>     <span class="o">=</span> <span class="n">new</span> <span class="n">JLabel</span><span class="p">(</span><span class="s2">&quot;Select File and Start Server&quot;</span><span class="p">))</span><span class="o">.</span><span class="n">setForeground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">);</span>

        <span class="n">panel</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JPanel</span><span class="p">();</span>
        <span class="n">panel</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">));</span>

        <span class="p">(</span><span class="n">upperBorder</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JPanel</span><span class="p">())</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);</span>
        <span class="p">(</span><span class="n">lowerBorder</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JPanel</span><span class="p">())</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);</span>
        <span class="p">(</span><span class="n">flowPanel</span>    <span class="o">=</span> <span class="n">new</span> <span class="n">JPanel</span><span class="p">())</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">BLACK</span><span class="p">);;</span>

        <span class="p">(</span><span class="n">nameField</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JTextField</span><span class="p">(</span><span class="mi">30</span><span class="p">))</span><span class="o">.</span><span class="n">setEditable</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="p">(</span><span class="n">sizeField</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JTextField</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="o">.</span><span class="n">setEditable</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="p">(</span><span class="n">typeField</span> <span class="o">=</span> <span class="n">new</span> <span class="n">JTextField</span><span class="p">(</span><span class="mi">20</span><span class="p">))</span><span class="o">.</span><span class="n">setEditable</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>

        <span class="n">nameField</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">);</span>
        <span class="n">sizeField</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">);</span>
        <span class="n">typeField</span><span class="o">.</span><span class="n">setBackground</span><span class="p">(</span><span class="n">Color</span><span class="o">.</span><span class="n">WHITE</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">setting</span> <span class="n">Panel</span> <span class="ow">and</span> <span class="n">adding</span> <span class="n">components</span> <span class="n">to</span> <span class="n">Panel</span>
        <span class="n">panel</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">new</span> <span class="n">GridBagLayout</span><span class="p">());</span>
        <span class="n">upperBorder</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">new</span> <span class="n">BorderLayout</span><span class="p">());</span>
        <span class="n">lowerBorder</span><span class="o">.</span><span class="n">setLayout</span><span class="p">(</span><span class="n">new</span> <span class="n">FlowLayout</span><span class="p">(</span><span class="n">FlowLayout</span><span class="o">.</span><span class="n">CENTER</span><span class="p">));</span>
        <span class="n">lowerBorder</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>

        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">nameLabel</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">WEST</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">nameField</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">WEST</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">browse</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">sizeLabel</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">WEST</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">sizeField</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">WEST</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">typeLabel</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">WEST</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">typeField</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">WEST</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">30</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">start</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">CENTER</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">address</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">GridBagConstraints</span><span class="o">.</span><span class="n">WEST</span><span class="p">,</span><span class="n">new</span> <span class="n">Insets</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>

        <span class="n">setFont</span><span class="p">(</span><span class="n">new</span> <span class="n">Font</span><span class="p">(</span><span class="s2">&quot;GreyscaleBasic&quot;</span><span class="p">,</span><span class="n">Font</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="n">nameLabel</span><span class="p">,</span><span class="n">sizeLabel</span><span class="p">,</span><span class="n">typeLabel</span><span class="p">);</span>
        <span class="n">setFont</span><span class="p">(</span><span class="n">new</span> <span class="n">Font</span><span class="p">(</span><span class="s2">&quot;Times new roman&quot;</span><span class="p">,</span><span class="n">Font</span><span class="o">.</span><span class="n">PLAIN</span><span class="p">,</span><span class="mi">14</span><span class="p">),</span><span class="n">nameField</span><span class="p">,</span><span class="n">sizeField</span><span class="p">,</span><span class="n">typeField</span><span class="p">);</span>
        <span class="n">setFont</span><span class="p">(</span><span class="n">new</span> <span class="n">Font</span><span class="p">(</span><span class="s2">&quot;tahoma&quot;</span><span class="p">,</span><span class="n">Font</span><span class="o">.</span><span class="n">BOLD</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="n">cross</span><span class="p">,</span><span class="n">address</span><span class="p">,</span><span class="n">minimize</span><span class="p">);</span>
        <span class="n">setFont</span><span class="p">(</span><span class="n">new</span> <span class="n">Font</span><span class="p">(</span><span class="s2">&quot;times new roman&quot;</span><span class="p">,</span><span class="n">Font</span><span class="o">.</span><span class="n">PLAIN</span><span class="p">,</span><span class="mi">20</span><span class="p">),</span><span class="n">start</span><span class="p">,</span><span class="n">browse</span><span class="p">,</span><span class="n">status</span><span class="p">,</span><span class="n">title</span><span class="p">);</span>

        <span class="o">//</span> <span class="n">add</span> <span class="n">Listeners</span>
        <span class="n">browse</span><span class="o">.</span><span class="n">addActionListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
        <span class="n">start</span><span class="o">.</span><span class="n">addActionListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
        <span class="n">cross</span><span class="o">.</span><span class="n">addActionListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>
        <span class="n">minimize</span><span class="o">.</span><span class="n">addActionListener</span><span class="p">(</span><span class="n">this</span><span class="p">);</span>

        <span class="o">//</span> <span class="nb">set</span> <span class="n">Top</span> <span class="n">Level</span> <span class="n">Container</span> <span class="n">Properties</span>
        <span class="n">flowPanel</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">minimize</span><span class="p">);</span>
        <span class="n">flowPanel</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">cross</span><span class="p">);</span>
        <span class="n">upperBorder</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">flowPanel</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">EAST</span><span class="p">);</span>
        <span class="n">upperBorder</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">title</span><span class="p">);</span> <span class="o">//</span><span class="ow">not</span> <span class="n">centered</span><span class="p">,</span> <span class="n">towards</span> <span class="n">left</span>
        <span class="n">add</span><span class="p">(</span><span class="n">upperBorder</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">NORTH</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">panel</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">CENTER</span><span class="p">);</span>
        <span class="n">add</span><span class="p">(</span><span class="n">lowerBorder</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">SOUTH</span><span class="p">);</span>

        <span class="n">addMouseListener</span><span class="p">(</span><span class="n">new</span> <span class="n">MouseAdapter</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">mousePressed</span><span class="p">(</span><span class="n">MouseEvent</span> <span class="n">me</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">screenX</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">getXOnScreen</span><span class="p">();</span>
                <span class="n">screenY</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">getYOnScreen</span><span class="p">();</span>
                <span class="n">myX</span>     <span class="o">=</span> <span class="n">getX</span><span class="p">();</span>
                <span class="n">myY</span>     <span class="o">=</span> <span class="n">getY</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="n">addMouseMotionListener</span><span class="p">(</span><span class="n">new</span> <span class="n">MouseMotionAdapter</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">mouseDragged</span><span class="p">(</span><span class="n">MouseEvent</span> <span class="n">me</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="nb">int</span> <span class="n">deltaX</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">getXOnScreen</span><span class="p">()</span> <span class="o">-</span> <span class="n">screenX</span><span class="p">;</span>
                <span class="nb">int</span> <span class="n">deltaY</span> <span class="o">=</span> <span class="n">me</span><span class="o">.</span><span class="n">getYOnScreen</span><span class="p">()</span> <span class="o">-</span> <span class="n">screenY</span><span class="p">;</span>
                <span class="n">setLocation</span><span class="p">(</span><span class="n">myX</span> <span class="o">+</span> <span class="n">deltaX</span> <span class="p">,</span> <span class="n">myY</span> <span class="o">+</span> <span class="n">deltaY</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
        <span class="n">setSize</span><span class="p">(</span><span class="mi">800</span><span class="p">,</span><span class="mi">400</span><span class="p">);</span>
        <span class="n">setResizable</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="n">setLocationRelativeTo</span><span class="p">(</span><span class="n">null</span><span class="p">);</span>
        <span class="n">setUndecorated</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
        <span class="n">setDefaultCloseOperation</span><span class="p">(</span><span class="n">DISPOSE_ON_CLOSE</span><span class="p">);</span>
        <span class="n">getRootPane</span><span class="p">()</span><span class="o">.</span><span class="n">setBorder</span><span class="p">(</span><span class="n">BorderFactory</span><span class="o">.</span><span class="n">createLineBorder</span><span class="p">(</span><span class="n">new</span> <span class="n">Color</span><span class="p">(</span><span class="mi">170</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">236</span><span class="p">),</span><span class="mi">5</span><span class="p">));</span>
        <span class="n">getRootPane</span><span class="p">()</span><span class="o">.</span><span class="n">setDefaultButton</span><span class="p">(</span><span class="n">start</span><span class="p">);</span>
        <span class="n">setVisible</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
        <span class="n">browse</span><span class="o">.</span><span class="n">requestFocus</span><span class="p">();</span> <span class="o">//</span> <span class="n">this</span> <span class="n">must</span> <span class="n">exist</span> <span class="n">here</span> <span class="p">(</span><span class="n">after</span> <span class="n">frame</span> <span class="ow">is</span> <span class="n">visible</span><span class="p">),</span> <span class="k">else</span> <span class="n">will</span> <span class="ow">not</span> <span class="n">work</span>
        <span class="n">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">new</span> <span class="n">Runnable</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">run</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="k">while</span><span class="p">(</span><span class="n">true</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">retrieveServerIP</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">})</span><span class="o">.</span><span class="n">start</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="n">private</span> <span class="n">void</span> <span class="n">setFont</span><span class="p">(</span><span class="n">Font</span> <span class="n">f</span><span class="p">,</span><span class="n">JComponent</span><span class="o">...</span><span class="n">c</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="n">JComponent</span> <span class="n">C</span><span class="p">:</span><span class="n">c</span><span class="p">)</span>
            <span class="n">C</span><span class="o">.</span><span class="n">setFont</span><span class="p">(</span><span class="n">f</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">private</span> <span class="n">void</span> <span class="n">openFile</span><span class="p">(</span><span class="n">File</span> <span class="n">path</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">File</span> <span class="n">f</span><span class="o">=</span><span class="n">path</span><span class="p">;</span>
        <span class="nb">int</span> <span class="n">counter</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
        <span class="n">fileSize</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">length</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">fileSize</span><span class="o">==</span><span class="il">0L</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;No Valid file found on specified location&quot;</span><span class="p">,</span><span class="s2">&quot;File not found&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">String</span> <span class="n">extension</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span><span class="o">.</span><span class="n">lastIndexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">f</span><span class="o">.</span><span class="n">toString</span><span class="p">()</span><span class="o">.</span><span class="n">length</span><span class="p">())</span><span class="o">.</span><span class="n">toUpperCase</span><span class="p">();</span>
        <span class="nb">long</span> <span class="n">tempSize</span><span class="o">=</span><span class="p">(</span><span class="nb">long</span><span class="p">)</span><span class="n">fileSize</span><span class="p">;</span>
        <span class="k">while</span><span class="p">(</span><span class="n">tempSize</span><span class="o">&gt;</span><span class="mi">1000</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">counter</span><span class="o">++</span><span class="p">;</span>
            <span class="n">tempSize</span><span class="o">/=</span><span class="mi">1024</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">if</span><span class="p">(</span><span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;JAVA&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;C&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;CPP&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;CS&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;CSS&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;HTML&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;JS&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;PHP&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;XML&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;VB&quot;</span><span class="p">))</span>
            <span class="n">extension</span><span class="o">+=</span><span class="s2">&quot; Source File&quot;</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;JPG&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;BMP&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;PNG&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;GIF&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;TIFF&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;ICO&quot;</span><span class="p">))</span>
            <span class="n">extension</span><span class="o">+=</span><span class="s2">&quot; File (Image/Icon)&quot;</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;MPG&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;MPEG&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;MP4&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;AVI&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;3GP&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;RMVB&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;WMV&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;MKV&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;VOB&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;MOV&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;FLV&quot;</span><span class="p">))</span>
            <span class="n">extension</span><span class="o">+=</span><span class="s2">&quot; File (Video)&quot;</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;MP3&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;WMA&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;FLAC&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;AAC&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;AMF&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;AMR&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;M4A&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;M4R&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;OGG&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;MP2&quot;</span><span class="p">)</span><span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;WAV&quot;</span><span class="p">))</span>
            <span class="n">extension</span><span class="o">+=</span><span class="s2">&quot; File (Audio)&quot;</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;EXE&quot;</span><span class="p">)</span> <span class="o">||</span><span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;CMD&quot;</span><span class="p">)</span> <span class="o">||</span><span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;BAT&quot;</span><span class="p">)</span> <span class="o">||</span> <span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;DMG&quot;</span><span class="p">)</span> <span class="o">||</span><span class="n">extension</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;MSI&quot;</span><span class="p">))</span>
            <span class="n">extension</span><span class="o">+=</span><span class="s2">&quot; File (Executable File/Script)&quot;</span><span class="p">;</span>
        <span class="k">else</span>
            <span class="n">extension</span><span class="o">+=</span><span class="s2">&quot; Document/File&quot;</span><span class="p">;</span>
        <span class="n">nameField</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">toString</span><span class="p">());</span>
        <span class="n">sizeField</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">tempSize</span> <span class="o">+</span><span class="s2">&quot; &quot;</span><span class="o">+</span><span class="n">sizeArray</span><span class="p">[</span><span class="n">counter</span><span class="p">]);</span>
        <span class="n">typeField</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="n">extension</span><span class="p">);</span>
        <span class="n">startFlag</span><span class="o">=</span><span class="n">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">public</span> <span class="n">void</span> <span class="n">actionPerformed</span><span class="p">(</span><span class="n">ActionEvent</span> <span class="n">ae</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">String</span> <span class="n">s</span><span class="o">=</span><span class="n">ae</span><span class="o">.</span><span class="n">getActionCommand</span><span class="p">();</span>
        <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;Browse&quot;</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="nb">int</span> <span class="n">ret</span> <span class="o">=</span> <span class="n">jfc</span><span class="o">.</span><span class="n">showOpenDialog</span><span class="p">(</span><span class="n">null</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">ret</span><span class="o">==</span><span class="n">JFileChooser</span><span class="o">.</span><span class="n">APPROVE_OPTION</span><span class="p">)</span>
                <span class="n">openFile</span><span class="p">(</span><span class="n">jfc</span><span class="o">.</span><span class="n">getSelectedFile</span><span class="p">());</span>
            <span class="n">start</span><span class="o">.</span><span class="n">requestFocusInWindow</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;X&quot;</span><span class="p">))</span>
            <span class="n">System</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;-&quot;</span><span class="p">))</span>
            <span class="n">setState</span><span class="p">(</span><span class="n">JFrame</span><span class="o">.</span><span class="n">ICONIFIED</span><span class="p">);</span>
        <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;Send File&quot;</span><span class="p">))</span>
            <span class="k">if</span><span class="p">(</span><span class="n">startFlag</span><span class="p">)</span>
                <span class="n">new</span> <span class="n">Thread</span><span class="p">(</span><span class="n">new</span> <span class="n">Runnable</span><span class="p">()</span>
                <span class="p">{</span>
                    <span class="n">public</span> <span class="n">void</span> <span class="n">run</span><span class="p">()</span>
                    <span class="p">{</span>
                        <span class="n">startServer</span><span class="p">();</span>
                    <span class="p">}</span>
                <span class="p">})</span><span class="o">.</span><span class="n">start</span><span class="p">();</span>
            <span class="k">else</span>
                <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;Select a Valid file first ( size &gt; 0B )&quot;</span><span class="p">,</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">private</span> <span class="n">void</span> <span class="n">startServer</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">start</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="n">browse</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">false</span><span class="p">);</span>
        <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Waiting for Client to Connect&quot;</span><span class="p">);</span>

        <span class="n">double</span> <span class="n">startTime</span><span class="p">,</span><span class="n">endTime</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">time</span> <span class="n">variables</span><span class="p">;</span>

        <span class="n">byte</span> <span class="n">b</span><span class="p">[]</span> <span class="o">=</span> <span class="n">new</span> <span class="n">byte</span><span class="p">[</span><span class="mi">100000</span><span class="p">];</span>
        <span class="o">//</span> <span class="n">array</span> <span class="n">to</span> <span class="n">retrieve</span> <span class="n">data</span> <span class="kn">from</span> <span class="nn">server</span> <span class="nn">and</span> <span class="nn">send</span> <span class="nn">to</span> <span class="nn">client</span>

        <span class="n">double</span> <span class="n">done</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">done</span> <span class="ow">is</span> <span class="n">used</span> <span class="n">to</span> <span class="n">count</span> <span class="n">the</span> <span class="n">percentage</span>

        <span class="nb">int</span> <span class="n">read</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">read</span> <span class="n">counts</span> <span class="n">the</span> <span class="nb">bytes</span> <span class="n">read</span> <span class="p">(</span><span class="n">within</span> <span class="mi">4</span> <span class="nb">bytes</span> <span class="n">integer</span> <span class="nb">range</span><span class="p">)</span> <span class="ow">in</span> <span class="n">WHILE</span> <span class="n">loop</span>

        <span class="n">String</span> <span class="n">data</span><span class="p">,</span><span class="n">fileName</span> <span class="o">=</span> <span class="n">nameField</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="n">nameField</span><span class="o">.</span><span class="n">getText</span><span class="p">()</span><span class="o">.</span><span class="n">lastIndexOf</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\&quot;</span><span class="s2">)+1);</span>
        <span class="o">//</span> <span class="n">data</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">data</span> <span class="n">to</span> <span class="n">be</span> <span class="n">sent</span> <span class="n">via</span> <span class="n">BR</span><span class="p">,</span> <span class="n">stores</span> <span class="p">(</span><span class="n">filename</span> <span class="o">+</span> <span class="n">length</span><span class="p">)</span>
        <span class="o">//</span> <span class="n">fileName</span> <span class="n">stores</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="nb">file</span>

        <span class="o">//</span> <span class="n">constructing</span> <span class="n">streams</span>
        <span class="n">BufferedReader</span> <span class="n">br</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">to</span> <span class="n">read</span> <span class="n">String</span> <span class="ow">and</span> <span class="nb">long</span> <span class="n">data</span> <span class="n">via</span> <span class="n">Socket</span>

        <span class="n">PrintWriter</span> <span class="n">pw</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">to</span> <span class="n">write</span> <span class="n">String</span> <span class="ow">and</span> <span class="nb">long</span> <span class="n">data</span> <span class="n">via</span> <span class="n">Socket</span>

        <span class="n">BufferedInputStream</span> <span class="n">bis</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span><span class="n">to</span> <span class="n">write</span> <span class="nb">file</span> <span class="n">contents</span> <span class="p">(</span><span class="n">byte</span> <span class="n">stream</span><span class="p">)</span> <span class="n">via</span> <span class="n">Socket</span>

        <span class="n">BufferedOutputStream</span> <span class="n">bos</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span><span class="n">to</span> <span class="n">read</span> <span class="n">byte</span> <span class="n">data</span> <span class="n">via</span> <span class="n">Socket</span>

        <span class="n">FileInputStream</span> <span class="n">fis</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">to</span> <span class="n">read</span> <span class="n">actual</span> <span class="nb">file</span> <span class="n">using</span> <span class="n">byte</span> <span class="n">stream</span>

        <span class="n">ServerSocket</span> <span class="n">ss</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">this</span> <span class="n">will</span> <span class="nb">open</span> <span class="n">a</span> <span class="n">socket</span> <span class="n">on</span> <span class="n">port</span> <span class="mi">4000</span> <span class="n">on</span> <span class="n">local</span> <span class="n">system</span>

        <span class="n">Socket</span> <span class="n">s</span><span class="o">=</span><span class="n">null</span><span class="p">;</span>
        <span class="o">//</span> <span class="n">this</span> <span class="n">will</span> <span class="n">serve</span> <span class="n">a</span> <span class="n">local</span> <span class="n">port</span> <span class="k">for</span> <span class="n">a</span> <span class="n">client</span>

        <span class="o">//</span> <span class="n">now</span> <span class="n">allocating</span> <span class="n">memory</span> <span class="n">to</span> <span class="n">objects</span> <span class="ow">and</span> <span class="n">starting</span> <span class="n">main</span> <span class="n">logic</span>

        <span class="n">data</span><span class="o">=</span><span class="n">fileName</span><span class="o">+</span><span class="s2">&quot;/&quot;</span><span class="o">+</span><span class="n">new</span> <span class="n">Double</span><span class="p">(</span><span class="n">fileSize</span><span class="p">);</span>
        <span class="k">try</span>
        <span class="p">{</span>
            <span class="n">ss</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ServerSocket</span><span class="p">(</span><span class="mi">4000</span><span class="p">);</span>
            <span class="n">s</span> <span class="o">=</span> <span class="n">ss</span><span class="o">.</span><span class="n">accept</span><span class="p">();</span>
            <span class="n">br</span> <span class="o">=</span> <span class="n">new</span> <span class="n">BufferedReader</span><span class="p">(</span><span class="n">new</span> <span class="n">InputStreamReader</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">getInputStream</span><span class="p">()));</span>
            <span class="n">pw</span> <span class="o">=</span> <span class="n">new</span> <span class="n">PrintWriter</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">getOutputStream</span><span class="p">());</span>
        <span class="p">}</span>
        <span class="n">catch</span><span class="p">(</span><span class="n">IOException</span> <span class="n">ioe</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="n">ioe</span><span class="o">.</span><span class="n">toString</span><span class="p">(),</span><span class="s2">&quot;error&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
            <span class="n">System</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">pw</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">data</span><span class="p">);</span>
        <span class="n">pw</span><span class="o">.</span><span class="n">flush</span><span class="p">();</span>
        <span class="k">try</span>
        <span class="p">{</span>
            <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Begining File Transfer&quot;</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="err">!</span><span class="p">(</span><span class="n">br</span><span class="o">.</span><span class="n">readLine</span><span class="p">()</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;Recieved&quot;</span><span class="p">)))</span>
            <span class="p">{</span>
                <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;Client not Ready or connection was closed&quot;</span><span class="p">,</span><span class="s2">&quot;Retry&quot;</span><span class="p">,</span><span class="mi">2</span><span class="p">);</span>
                <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Faliure&quot;</span><span class="p">);</span>
                <span class="n">System</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
            <span class="p">}</span>
            <span class="n">bis</span> <span class="o">=</span> <span class="n">new</span> <span class="n">BufferedInputStream</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">getInputStream</span><span class="p">());</span>
            <span class="n">bos</span> <span class="o">=</span> <span class="n">new</span> <span class="n">BufferedOutputStream</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">getOutputStream</span><span class="p">());</span>
            <span class="n">fis</span> <span class="o">=</span> <span class="n">new</span> <span class="n">FileInputStream</span><span class="p">(</span><span class="n">nameField</span><span class="o">.</span><span class="n">getText</span><span class="p">());</span>
            <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Sending file to &quot;</span><span class="o">+</span><span class="n">s</span><span class="p">);</span>

            <span class="n">lowerBorder</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
            <span class="n">remove</span><span class="p">(</span><span class="n">lowerBorder</span><span class="p">);</span>
            <span class="n">add</span><span class="p">(</span><span class="n">jpb</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">SOUTH</span><span class="p">);</span>
            <span class="n">repaint</span><span class="p">();</span>
            <span class="n">revalidate</span><span class="p">();</span>

            <span class="n">startTime</span><span class="o">=</span><span class="n">System</span><span class="o">.</span><span class="n">currentTimeMillis</span><span class="p">();</span>
            <span class="k">while</span><span class="p">((</span><span class="n">read</span><span class="o">=</span><span class="n">fis</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">b</span><span class="p">))</span><span class="o">!=-</span><span class="mi">1</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">done</span><span class="o">+=</span><span class="n">read</span><span class="p">;</span>
                <span class="n">ServerSwingWorker</span> <span class="n">ssw</span> <span class="o">=</span> <span class="n">new</span> <span class="n">ServerSwingWorker</span><span class="p">(</span><span class="n">done</span><span class="p">,</span><span class="n">fileSize</span><span class="p">,</span><span class="n">read</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">bos</span><span class="p">,</span><span class="n">jpb</span><span class="p">);</span>
                <span class="n">ssw</span><span class="o">.</span><span class="n">execute</span><span class="p">();</span>
                <span class="k">while</span><span class="p">(</span><span class="err">!</span><span class="p">(</span><span class="n">ssw</span><span class="o">.</span><span class="n">isDone</span><span class="p">())){}</span>
            <span class="p">}</span>
            <span class="n">bos</span><span class="o">.</span><span class="n">flush</span><span class="p">();</span>
            <span class="n">endTime</span><span class="o">=</span><span class="n">System</span><span class="o">.</span><span class="n">currentTimeMillis</span><span class="p">();</span>
            <span class="n">browse</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
            <span class="n">start</span><span class="o">.</span><span class="n">setEnabled</span><span class="p">(</span><span class="n">true</span><span class="p">);</span>
            <span class="n">nameField</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
            <span class="n">sizeField</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
            <span class="n">typeField</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">);</span>
            <span class="n">remove</span><span class="p">(</span><span class="n">jpb</span><span class="p">);</span>
            <span class="n">lowerBorder</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">status</span><span class="p">);</span>
            <span class="n">add</span><span class="p">(</span><span class="n">lowerBorder</span><span class="p">,</span><span class="n">BorderLayout</span><span class="o">.</span><span class="n">SOUTH</span><span class="p">);</span>
            <span class="n">startFlag</span><span class="o">=</span><span class="n">false</span><span class="p">;</span>
            <span class="n">repaint</span><span class="p">();</span>
            <span class="n">revalidate</span><span class="p">();</span>
            <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Sent 100 %&quot;</span><span class="p">);</span>
            <span class="n">double</span> <span class="n">time</span><span class="o">=</span><span class="p">(</span><span class="n">endTime</span><span class="o">-</span><span class="n">startTime</span><span class="p">)</span><span class="o">/</span><span class="mi">1000</span><span class="p">;</span>
            <span class="n">double</span> <span class="n">speed</span><span class="o">=</span><span class="p">(</span><span class="n">fileSize</span><span class="o">/</span><span class="n">time</span><span class="p">)</span><span class="o">/</span><span class="mi">1048576</span><span class="p">;</span>
            <span class="n">String</span> <span class="n">speedString</span><span class="o">=</span><span class="n">String</span><span class="o">.</span><span class="n">valueOf</span><span class="p">(</span><span class="n">speed</span><span class="p">);</span>
            <span class="n">speedString</span><span class="o">=</span><span class="p">((</span><span class="n">speedString</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span><span class="o">&lt;</span><span class="n">speedString</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="err">?</span><span class="n">speedString</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">speedString</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">)</span><span class="o">+</span><span class="mi">3</span><span class="p">):</span><span class="n">speedString</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
            <span class="n">pw</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">time</span><span class="p">);</span>
            <span class="n">pw</span><span class="o">.</span><span class="n">flush</span><span class="p">();</span>
            <span class="n">pw</span><span class="o">.</span><span class="n">println</span><span class="p">(</span><span class="n">speedString</span><span class="p">);</span>
            <span class="n">pw</span><span class="o">.</span><span class="n">flush</span><span class="p">();</span>
            <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="s2">&quot;Time taken is &quot;</span><span class="o">+</span><span class="n">time</span><span class="o">+</span><span class="s2">&quot;nSpeed is &quot;</span><span class="o">+</span><span class="n">speedString</span><span class="o">+</span><span class="s2">&quot; MBPS&quot;</span><span class="p">,</span><span class="s2">&quot;File Sent (Server)&quot;</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
            <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Select File and Start Server&quot;</span><span class="p">);</span>

            <span class="o">//</span> <span class="n">reset</span> <span class="k">for</span> <span class="n">further</span> <span class="n">operation</span>
            <span class="n">status</span><span class="o">.</span><span class="n">setText</span><span class="p">(</span><span class="s2">&quot;Select File and Start Server&quot;</span><span class="p">);</span>
            <span class="n">bis</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">bos</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">fis</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">br</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">pw</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">ss</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
            <span class="n">s</span><span class="o">.</span><span class="n">close</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">catch</span><span class="p">(</span><span class="n">IOException</span> <span class="n">ioe</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">JOptionPane</span><span class="o">.</span><span class="n">showMessageDialog</span><span class="p">(</span><span class="n">null</span><span class="p">,</span><span class="n">ioe</span><span class="o">.</span><span class="n">toString</span><span class="p">(),</span><span class="s2">&quot;Error&quot;</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
            <span class="n">System</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="p">}</span>
    <span class="n">public</span> <span class="n">static</span> <span class="n">void</span> <span class="n">main</span><span class="p">(</span><span class="n">final</span> <span class="n">String</span><span class="o">...</span><span class="n">args</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">SwingUtilities</span><span class="o">.</span><span class="n">invokeLater</span><span class="p">(</span><span class="n">new</span> <span class="n">Runnable</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">run</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="k">if</span><span class="p">(</span> <span class="n">args</span><span class="o">.</span><span class="n">length</span><span class="o">==</span><span class="mi">1</span> <span class="o">&amp;&amp;</span> <span class="err">!</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="s2">&quot;%1&quot;</span><span class="p">))</span> <span class="p">)</span>
                    <span class="n">new</span> <span class="n">Server</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
                <span class="k">else</span>
                    <span class="n">new</span> <span class="n">Server</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">class</span> <span class="nc">ServerSwingWorker</span> <span class="n">extends</span> <span class="n">SwingWorker</span>
<span class="p">{</span>
    <span class="n">JProgressBar</span> <span class="n">jpb</span><span class="p">;</span>
    <span class="n">final</span> <span class="n">double</span> <span class="n">done</span><span class="p">,</span><span class="n">size</span><span class="p">;</span>
    <span class="n">byte</span> <span class="n">b</span><span class="p">[]</span> <span class="o">=</span> <span class="n">new</span> <span class="n">byte</span><span class="p">[</span><span class="mi">100000</span><span class="p">];</span>
    <span class="n">final</span> <span class="nb">int</span> <span class="n">read</span><span class="p">;</span>
    <span class="n">BufferedOutputStream</span> <span class="n">bos</span><span class="p">;</span>
    <span class="n">ServerSwingWorker</span><span class="p">(</span><span class="n">double</span> <span class="n">done</span><span class="p">,</span><span class="n">double</span> <span class="n">size</span><span class="p">,</span><span class="nb">int</span> <span class="n">read</span><span class="p">,</span><span class="n">byte</span> <span class="n">b</span><span class="p">[],</span><span class="n">BufferedOutputStream</span> <span class="n">bos</span><span class="p">,</span><span class="n">JProgressBar</span> <span class="n">jpb</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">this</span><span class="o">.</span><span class="n">done</span> <span class="o">=</span> <span class="n">done</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">size</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">read</span> <span class="o">=</span> <span class="n">read</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">b</span>    <span class="o">=</span> <span class="n">b</span><span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">jpb</span>  <span class="o">=</span> <span class="n">jpb</span> <span class="p">;</span>
        <span class="n">this</span><span class="o">.</span><span class="n">bos</span>  <span class="o">=</span> <span class="n">bos</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">protected</span> <span class="n">Void</span> <span class="n">doInBackground</span><span class="p">()</span> <span class="n">throws</span> <span class="ne">Exception</span>
    <span class="p">{</span>
        <span class="n">bos</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">read</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">null</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">protected</span> <span class="n">void</span> <span class="n">done</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">final</span> <span class="n">double</span> <span class="n">temp</span><span class="o">=</span><span class="p">(</span><span class="n">done</span><span class="o">/</span><span class="n">size</span><span class="p">)</span><span class="o">*</span><span class="mi">100</span><span class="p">;</span>
        <span class="n">SwingUtilities</span><span class="o">.</span><span class="n">invokeLater</span><span class="p">(</span><span class="n">new</span> <span class="n">Runnable</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="n">public</span> <span class="n">void</span> <span class="n">run</span><span class="p">()</span>
            <span class="p">{</span>
                <span class="n">String</span> <span class="n">tString</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Double</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">();</span>
                <span class="nb">int</span> <span class="n">index</span><span class="o">=</span><span class="n">tString</span><span class="o">.</span><span class="n">indexOf</span><span class="p">(</span><span class="s2">&quot;.&quot;</span><span class="p">);</span>
                <span class="nb">int</span> <span class="n">breakPoint</span><span class="o">=</span> <span class="p">(</span><span class="n">index</span><span class="o">+</span><span class="mi">3</span><span class="p">)</span><span class="o">&gt;</span><span class="n">tString</span><span class="o">.</span><span class="n">length</span><span class="p">()</span><span class="err">?</span><span class="n">tString</span><span class="o">.</span><span class="n">length</span><span class="p">():(</span><span class="n">index</span><span class="o">+</span><span class="mi">3</span><span class="p">);</span>
                <span class="n">tString</span> <span class="o">=</span> <span class="n">new</span> <span class="n">Double</span><span class="p">(</span><span class="n">temp</span><span class="p">)</span><span class="o">.</span><span class="n">toString</span><span class="p">();</span>
                <span class="n">tString</span><span class="o">=</span><span class="n">tString</span><span class="o">.</span><span class="n">substring</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">breakPoint</span><span class="p">);</span>
                <span class="n">jpb</span><span class="o">.</span><span class="n">setString</span><span class="p">(</span><span class="s2">&quot;Sending : &quot;</span><span class="o">+</span><span class="n">tString</span><span class="o">+</span><span class="s2">&quot; %&quot;</span><span class="p">);</span>
                <span class="n">jpb</span><span class="o">.</span><span class="n">setValue</span><span class="p">((</span><span class="nb">int</span><span class="p">)</span><span class="n">temp</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">});</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>Just let us know if you are not able to understand any method or class used here</p>
  </div>
  <div class="article_meta">
    <p>Posted on: Thu 30 January 2014</p>
    <p>Category: <a href="//thegeekyway.com/category/how-to-diy/">How To DIY</a>
 &ndash; Tags:
      <a href="//thegeekyway.com/tag/java/">java</a>,      <a href="//thegeekyway.com/tag/networking/">networking</a>,      <a href="//thegeekyway.com/tag/sockets/">sockets</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "filetransfer/";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = '//thegeekyway.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


    <div id="ending_message">
      <p>&copy; The Geeky Way. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
      <a href="/disclaimer/">Disclaimer</a> 
      <a href="/privacy-policy/">Privacy policy</a>
    </div>
  </main>
</body>
</html>