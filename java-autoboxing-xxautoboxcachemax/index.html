<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="//thegeekyway.com/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="//thegeekyway.com/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="//thegeekyway.com/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="The Geeky Way">
  <meta name="description" content="Posts and writings by The Geeky Way">

  <link href="//thegeekyway.com/feed/all.atom.xml" type="application/atom+xml" rel="alternate" title="The Geeky Way Atom" />
  <link href="//thegeekyway.com/feed/index.html" type="application/rss+xml" rel="alternate" title="The Geeky Way RSS" />

<meta name="keywords" content="java">

  <title>
    The Geeky Way
&ndash; Java: Autoboxing and -XX:AutoBoxCacheMax  </title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-46055942-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="//thegeekyway.com">
        <img src="/uploads/images/tgw.png" alt="logo">
      </a>
      <h2><a href="//thegeekyway.com">The Geeky Way</a></h2>
      <p></p>
      <ul>
        <li><a href="/categories.html" target="_blank">Categories</a></li>
        <li><a href="/tags.html" target="_blank">Tags</a></li>
        <li><a href="/archives.html" target="_blank">Archives</a></li>
        <li><a href="/about-us/" target="_blank">About us</a></li>
        <li><a href="/authors.html" target="_blank">Authors</a></li>
        <hr>
        <p><b>Social Media</b></p>
        <a href="https://www.twitter.com/thegeekyway" target="_blank">
          <img src="/icons/twitter.png" style="width:25px;height:25px;border:0;">
        </a>
        <a href="https://www.facebook.com/thegeekyway" target="_blank">
          <img src="/icons/facebook.png" style="width:25px;height:25px;border:0;">
        </a>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      Technology Inside Out!
      <br><br>
      <a href="//thegeekyway.com">Index</a> &brvbar; <a href="//thegeekyway.com/archives.html">Archives</a>
      &brvbar; <a href="//thegeekyway.com/feed/all.atom.xml">Atom</a>
      &brvbar; <a href="//thegeekyway.com/feed/">RSS</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="//thegeekyway.com/java-autoboxing-xxautoboxcachemax/">Java: Autoboxing and -XX:AutoBoxCacheMax</a></h1>
  </div>
  <div class="article_author">
    <p><strong>By: <a href=//thegeekyway.com/author/anoop/>Anoop</a></strong></p>
  </div>
  <div class="article_text">
    <p>Autoboxing is the mechanism in Java to convert primitive type values to respective wrapper class object. Java programmer mostly use autoboxing while using collections, since collection only holds object and to put primitive type data into collection, it's need to use wrapper classes to convert into objects.</p>
<p>So , here is autoboxing to assign primitive type to wrapper type directly.</p>
<ul>
<li><code>boolean</code> to type <code>Boolean</code></li>
<li><code>byte</code> to type <code>Byte</code></li>
<li><code>short</code> to type <code>Short</code></li>
<li><code>char</code> to type <code>Character</code></li>
<li><code>int</code> to type <code>Integer</code></li>
<li><code>long</code> to type <code>Long</code></li>
<li><code>float</code> to type <code>Float</code></li>
<li><code>double</code> to type <code>Double</code></li>
</ul>
<p>You can directly compare wrapper classes using <p style="background-color: #ffff99;"> <em>==</em> , <p style="background-color: #ffffff;"> just like primitive types but </p></p>for certain range which is by default (-128 to 127) .Which is default value of   <p style="background-color: #ffff00;">-XX:AutoBoxCacheMax .</p></p>
<p>Here is the demo program when your object which is a autoboxed primitive type can be compared directly.</p>
<div class="highlight"><pre><span></span>        <span class="nb">int</span> <span class="n">int1</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
        <span class="nb">int</span> <span class="n">int2</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
        <span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">int1</span> <span class="o">==</span> <span class="n">int2</span><span class="p">);</span>    <span class="o">//</span> <span class="k">true</span> <span class="k">as</span> <span class="n">they</span> <span class="k">are</span> <span class="n">primitive</span>

        <span class="nb">Integer</span> <span class="n">integerObj1</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Integer</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
        <span class="nb">Integer</span> <span class="n">integerObj2</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Integer</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
        <span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">integerObj1</span> <span class="o">==</span> <span class="n">integerObj2</span><span class="p">);</span>   <span class="o">//</span> <span class="n">always</span> <span class="k">false</span> <span class="k">as</span> <span class="n">these</span> <span class="k">are</span> <span class="n">objects</span> 

        <span class="nb">Integer</span> <span class="n">integer1</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
        <span class="nb">Integer</span> <span class="n">integer2</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
        <span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">integer1</span> <span class="o">==</span> <span class="n">integer2</span><span class="p">);</span>   <span class="o">//</span> <span class="k">true</span>

        <span class="nb">Character</span> <span class="n">c1</span> <span class="o">=</span> <span class="mi">110</span><span class="p">;</span>
        <span class="nb">Character</span> <span class="n">c2</span> <span class="o">=</span> <span class="mi">110</span><span class="p">;</span>
        <span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">c1</span> <span class="o">==</span> <span class="n">c2</span><span class="p">);</span>    <span class="o">//</span><span class="k">true</span>

        <span class="n">Short</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">56</span><span class="p">;</span>
        <span class="n">Short</span> <span class="n">s1</span> <span class="o">=</span> <span class="mi">56</span><span class="p">;</span>
        <span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">s</span> <span class="o">==</span> <span class="n">s1</span><span class="p">);</span>    <span class="o">//</span><span class="k">true</span>
</pre></div>


<p><strong> Why caching this range :</strong></p>
<p>This short range are generally used and  performance of <strong> <p style="font-family: courier new,courier; background-color: #ffff00;"><em>public static valueOf( i)</em></p></strong>  as this method is likely to yield significantly better space and time performance by caching frequently requested values.</p>
<p><strong> Changing  -XX:AutoBoxCacheMax :</strong></p>
<p>You can set the -XX:AutoBoxCacheMax=1000, and it will catch integer upto 1000 which means following code will results true</p>
<div class="highlight"><pre><span></span><span class="nb">Integer</span> <span class="n">integer1</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
        <span class="nb">Integer</span> <span class="n">integer2</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
        <span class="k">System</span><span class="p">.</span><span class="k">out</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">integer1</span> <span class="o">==</span> <span class="n">integer2</span><span class="p">);</span>   <span class="o">//</span> <span class="k">true</span>
</pre></div>


<p>Note: this changing size only works for positive integer and it can't be set less than 127.  See inner class <a href="http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/7-b147/java/lang/Integer.java?av=f#596"> <p style="font-family: courier new,courier;">private static class IntegerCache</p></a> in Integer.java</p>
<p><a href="http://help.eclipse.org/helios/index.jsp?topic=%2Forg.eclipse.pde.doc.user%2Fguide%2Ftools%2Flaunchers%2Farguments.htm">Setting Runtime VM option in Eclipse</a>,</p>
<p><strong>Max size of -XX:AutoBoxCacheMax ;</strong></p>
<p>Max cache size can't be more than -Xmx (which is JVM heap size) . Heap size is defined by vm argument -Xmxm .<br>
But, you as soon as JVM initialized, it allocate the memory for caching purpose. But you can't allocate whole (-Xmx in byte)/4 (4byte is size of  int) for AutoBoxCache because of other object needed to be loaded and you might end up with  <p style="font-family: courier new,courier;">java.lang.OutOfMemoryError: Java heap space</p>.</p>
<p>Also, note that for other wrapper classes except Integer , have fixed caching size upto 127 only.</p>
  </div>
  <div class="article_meta">
    <p>Posted on: Thu 13 February 2014</p>
    <p>Category: <a href="//thegeekyway.com/category/java/">Java</a>
 &ndash; Tags:
      <a href="//thegeekyway.com/tag/java/">java</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "java-autoboxing-xxautoboxcachemax/";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = '//thegeekyway.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


    <div id="ending_message">
      <p>&copy; The Geeky Way. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
      <a href="/disclaimer/">Disclaimer</a> 
      <a href="/privacy-policy/">Privacy policy</a>
    </div>
  </main>
</body>
</html>