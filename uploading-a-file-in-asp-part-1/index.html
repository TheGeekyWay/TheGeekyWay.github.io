<!DOCTYPE html>
<html lang="en">

<head>
  <!-- ## for client-side less
  <link rel="stylesheet/less" type="text/css" href="//thegeekyway.com/theme/css/style.less">
  <script src="http://cdnjs.cloudflare.com/ajax/libs/less.js/1.7.3/less.min.js" type="text/javascript"></script>
  -->
  <link rel="stylesheet" type="text/css" href="//thegeekyway.com/theme/css/style.css">
  <link rel="stylesheet" type="text/css" href="//thegeekyway.com/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="author" content="The Geeky Way">
  <meta name="description" content="Posts and writings by The Geeky Way">

  <link href="//thegeekyway.com/feed/all.atom.xml" type="application/atom+xml" rel="alternate" title="The Geeky Way Atom" />
  <link href="//thegeekyway.com/feed/index.html" type="application/rss+xml" rel="alternate" title="The Geeky Way RSS" />

<meta name="keywords" content="asp.net, C#">

  <title>
    The Geeky Way
&ndash; Asp.net Basics : Uploading a file in asp.net using validations (Part 1 of 5)  </title>

<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-46055942-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="//thegeekyway.com">
        <img src="/uploads/images/tgw.png" alt="logo">
      </a>
      <h2><a href="//thegeekyway.com">The Geeky Way</a></h2>
      <p></p>
      <ul>
        <li><a href="/categories.html" target="_blank">Categories</a></li>
        <li><a href="/tags.html" target="_blank">Tags</a></li>
        <li><a href="/archives.html" target="_blank">Archives</a></li>
        <li><a href="/about-us/" target="_blank">About us</a></li>
        <li><a href="/authors.html" target="_blank">Authors</a></li>
        <hr>
        <p><b>Social Media</b></p>
        <a href="https://www.twitter.com/thegeekyway" target="_blank">
          <img src="/icons/twitter.png" style="width:25px;height:25px;border:0;">
        </a>
        <a href="https://www.facebook.com/thegeekyway" target="_blank">
          <img src="/icons/facebook.png" style="width:25px;height:25px;border:0;">
        </a>
      </ul>
    </div>
  </aside>

  <main>
    <header>
      <p>
      Technology Inside Out!
      <br><br>
      <a href="//thegeekyway.com">Index</a> &brvbar; <a href="//thegeekyway.com/archives.html">Archives</a>
      &brvbar; <a href="//thegeekyway.com/feed/all.atom.xml">Atom</a>
      &brvbar; <a href="//thegeekyway.com/feed/">RSS</a>
      </p>
    </header>

<article>
  <div class="article_title">
    <h1><a href="//thegeekyway.com/uploading-a-file-in-asp-part-1/">Asp.net Basics : Uploading a file in asp.net using validations (Part 1 of 5)</a></h1>
  </div>
  <div class="article_author">
    <p><strong>By: <a href=//thegeekyway.com/author/deep_singh/>Deep_Singh</a></strong></p>
  </div>
  <div class="article_text">
    <div style="text-align:center">
<p><a href="//thegeekyway.com/uploads/images/2014/01/CoverImageASPNetFileUpload.png"><img alt="CoverImageASPNetFileUpload" src="//thegeekyway.com/uploads/images/2014/01/CoverImageASPNetFileUpload.png"></a></p>
</div>
<hr>
<p>Contents of this 5 part tutorial<br>
Part 1 : <a href="http://www.thegeekyway.com/uploading-a-file-in-asp-part-1/">Basics of ASP.Net file uploading, uploading a file to a server.</a><br>
Part 2 : <a href="http://www.thegeekyway.com/asp-net-basics-uploading-a-file-in-asp-net-using-validations-part-2/">ASP.Net file uploading using EmptyFile Validations.</a><br>
Part 3 : <a href="http://www.thegeekyway.com/asp-net-basics-uploading-a-file-in-asp-net-using-validations-part-3/">ASP.Net file uploading using FileSize validation.</a><br>
Part 4 : <a href="http://www.thegeekyway.com/asp-net-basics-uploading-a-file-in-asp-net-using-validations-part-4/">ASP.Net file uploading using FileExtension validator.</a><br>
Part 5 : <a href="http://www.thegeekyway.com/asp-net-basics-uploading-file-asp-net-using-validations-part-5/">Complete ASP.Net file uploading using all the Validations one at a time.</a></p>
<p>This is the Part 1 of the 5 part tutorial on how to upload file onto the server using asp.net and validate the file.</p>
<h2><strong>File Upload in asp.net : Basics</strong></h2>
<p>Following controls are required for uploading a file to server using asp.net</p>
<ul>
<li><strong>File upload control :</strong> It will only be used to select file which will be uploaded on server, it will not be used to upload the file.</li>
<li><strong>Button :</strong> To upload a file we need a button, drag and drop the button on the screen from toolbox and change the button name to "Upload File".</li>
<li><strong>A label control :</strong> To display the status of the upload.</li>
</ul>
<h2><strong>File Upload in asp.net : v1.0 (no validations used, the file will be uploaded as it is) </strong></h2>
<p>This is the basic form of file upload, where no validations are being used, user can upload as much large file as possible. But one thing must be noted that this method should be strictly avoided as there is no validations used in this method (validations explained in v1.1 and v1.2) and can be a subject to DDoS attacks (Denial of service) and can shut down the server. This code is just to show how to upload a file and save it on server.</p>
<p>Here is the back end structure I am using on Microsoft Visual Studio 2008.</p>
<div style="text-align:center">
<p><a href="//thegeekyway.com/uploads/images/2014/01/FileUpload41.png"><img alt="FileUpload4" src="//thegeekyway.com/uploads/images/2014/01/FileUpload41.png"></a></p>
</div>
<p>Here a file upload control is used which is used to select the file and an upload button which will upload the file. The second row will display the characteristics of the file, whether the file is a ".pdf" or a ".doc" (and other extensions) file and display the image of file type. The second row is being hidden with a panel until the file isnt uploaded.</p>
<p>Let us take a ".pdf" file which will be uploaded on the server under the "uploads" folder. The main code used for uploading a file onto server is :-</p>
<div class="highlight"><pre><span></span><span class="p">.</span>
<span class="p">.</span>
<span class="n">FileUpload1</span><span class="p">.</span><span class="n">SaveAs</span><span class="p">(</span><span class="n">Server</span><span class="p">.</span><span class="n">MapPath</span><span class="p">(</span><span class="ss">&quot;~/uploads/&quot;</span> <span class="o">+</span> <span class="n">FileUpload1</span><span class="p">.</span><span class="n">FileName</span><span class="p">));</span>
<span class="p">.</span>
<span class="p">.</span>
</pre></div>


<p>Complete explanation of the code :-</p>
<blockquote>
<p><strong>FileUpload1 :</strong> The contol name of the FileUpload in toolbox, administrators can use any file name.</p>
<p><strong>SaveAs</strong> : Its the method found in <a href="http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols%28v=vs.110%29.aspx">System.Web.UI.WebControls</a>  namespace and in System.Web (System.Web.dll) assembly, its main purpose is to save the file on the server.</p>
<p><strong>MapPath :</strong> This method is used to return the complete physical path for the virtual path that you pass in the method.</p>
</blockquote>
<p>Now let us upload a file on the server for example "SampleFile.pdf" is being uploaded on the server. The output once the file is uploaded is :-</p>
<div style="text-align:center">
<p><a href="//thegeekyway.com/uploads/images/2014/01/FileUpload2.png"><img alt="FileUpload2" src="//thegeekyway.com/uploads/images/2014/01/FileUpload2.png"></a></p>
</div>
<p>The complete cs code for v1.0 is (remember this doesn't use any validations, only retrieves the name and the file extension of the file) :-</p>
<div class="highlight"><pre><span></span><span class="nv">protected</span> <span class="nv">void</span> <span class="nv">Page_Load</span><span class="ss">(</span><span class="nv">object</span> <span class="nv">sender</span>, <span class="nv">EventArgs</span> <span class="nv">e</span><span class="ss">)</span>
    {
        <span class="o">//</span> <span class="nv">Hiding</span> <span class="nv">the</span> <span class="nv">panel</span> <span class="nv">in</span> <span class="nv">the</span> <span class="nv">page</span> <span class="nv">load</span> 
        <span class="nv">Panel1</span>.<span class="nv">Visible</span> <span class="o">=</span> <span class="nv">false</span><span class="c1">;</span>
    }
    <span class="nv">protected</span> <span class="nv">void</span> <span class="nv">Button1_Click</span><span class="ss">(</span><span class="nv">object</span> <span class="nv">sender</span>, <span class="nv">EventArgs</span> <span class="nv">e</span><span class="ss">)</span>
    {
        <span class="o">//</span><span class="nv">calling</span> <span class="nv">the</span> <span class="nv">valid_file</span> <span class="nv">method</span>, <span class="k">if</span> <span class="nv">the</span> <span class="k">return</span> <span class="nv">value</span> <span class="nv">is</span> <span class="nv">not</span> <span class="mi">1</span> <span class="k">then</span> <span class="nv">file</span> <span class="nv">doesnot</span> <span class="nv">exist</span>
        <span class="nv">int</span> <span class="nv">validate</span> <span class="o">=</span> <span class="nv">validate_file</span><span class="ss">()</span><span class="c1">;</span>
        <span class="k">if</span><span class="ss">(</span><span class="nv">validate</span> <span class="o">==</span> <span class="mi">1</span><span class="ss">)</span>
        { 
            <span class="o">//</span> <span class="nv">Getting</span> <span class="nv">all</span> <span class="nv">the</span> <span class="nv">file</span> <span class="nv">details</span>
            <span class="nv">GetFileDetails</span><span class="ss">()</span><span class="c1">;            </span>
            <span class="o">//</span> <span class="k">If</span> <span class="nv">file</span> <span class="nv">exist</span> <span class="k">then</span> <span class="nv">the</span> <span class="nv">file</span> <span class="nv">will</span> <span class="nv">be</span> <span class="nv">saved</span> <span class="nv">in</span> <span class="nv">the</span> <span class="nv">virtual</span> <span class="nv">directory</span>
            <span class="nv">SaveFile</span><span class="ss">()</span><span class="c1">;</span>
        }
    }
    <span class="nv">private</span> <span class="nv">int</span> <span class="nv">validate_file</span><span class="ss">()</span>
    {
        <span class="o">//</span> <span class="nv">Code</span> <span class="nv">to</span> <span class="nv">test</span> <span class="k">if</span> <span class="nv">FileUpload1</span> <span class="nv">has</span> <span class="nv">the</span> <span class="nv">file</span> <span class="nv">or</span> <span class="nv">not</span>
        <span class="k">if</span> <span class="ss">(</span><span class="nv">FileUpload1</span>.<span class="nv">HasFile</span><span class="ss">)</span>
        {
            <span class="nv">Panel1</span>.<span class="nv">Visible</span> <span class="o">=</span> <span class="nv">true</span><span class="c1">;</span>
            <span class="k">return</span> <span class="mi">1</span><span class="c1">;</span>
        }
        <span class="k">else</span>
        {
            <span class="nv">Label2</span>.<span class="nv">Text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">No File Uploaded</span><span class="s2">&quot;</span><span class="c1">;</span>
            <span class="o">//</span> <span class="nv">Color</span>.<span class="nv">Red</span> <span class="nv">will</span> <span class="nv">be</span> <span class="nv">called</span> <span class="nv">by</span> <span class="nv">namespace</span> <span class="nv">System</span>.<span class="nv">Drawing</span>
            <span class="nv">Label2</span>.<span class="nv">ForeColor</span> <span class="o">=</span> <span class="nv">Color</span>.<span class="nv">Red</span><span class="c1">;</span>
            <span class="k">return</span> <span class="mi">0</span><span class="c1">;</span>
        }        
    }
    <span class="nv">private</span> <span class="nv">void</span> <span class="nv">SaveFile</span><span class="ss">()</span>
    {
        <span class="nv">File_Upload_Status</span>.<span class="nv">Text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">Valid FIle</span><span class="s2">&quot;</span><span class="c1">;</span>
        <span class="nv">Image1</span>.<span class="nv">ImageUrl</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">~//images//success.png</span><span class="s2">&quot;</span><span class="c1">;</span>
        <span class="o">//</span><span class="nv">Invoking</span> <span class="nv">the</span> <span class="nv">saveas</span> <span class="nv">method</span> <span class="nv">which</span> <span class="nv">saves</span> <span class="nv">the</span> <span class="nv">file</span> <span class="nv">in</span> <span class="nv">the</span> <span class="nv">directory</span>
        <span class="nv">FileUpload1</span>.<span class="nv">SaveAs</span><span class="ss">(</span><span class="nv">Server</span>.<span class="nv">MapPath</span><span class="ss">(</span><span class="s2">&quot;</span><span class="s">~/uploads/</span><span class="s2">&quot;</span> <span class="o">+</span> <span class="nv">FileUpload1</span>.<span class="nv">FileName</span><span class="ss">))</span><span class="c1">;</span>
    }
    <span class="nv">private</span> <span class="nv">void</span> <span class="nv">GetFileDetails</span><span class="ss">()</span>
    {
        <span class="o">//</span> <span class="nv">Path</span> <span class="nv">will</span> <span class="nv">be</span> <span class="nv">called</span> <span class="nv">by</span> <span class="nv">using</span> <span class="nv">System</span>.<span class="nv">IO</span> <span class="nv">namespace</span>
        <span class="nv">string</span> <span class="nv">FileExtension</span> <span class="o">=</span> <span class="nv">Path</span>.<span class="nv">GetExtension</span><span class="ss">(</span><span class="nv">FileUpload1</span>.<span class="nv">FileName</span><span class="ss">)</span><span class="c1">;</span>
        <span class="nv">int</span> <span class="nv">FileSize</span> <span class="o">=</span> <span class="nv">FileUpload1</span>.<span class="nv">PostedFile</span>.<span class="nv">ContentLength</span><span class="c1">;</span>
        <span class="nv">Label11</span>.<span class="nv">Text</span> <span class="o">=</span> <span class="nv">FileUpload1</span>.<span class="nv">FileName</span><span class="c1">;</span>
        <span class="nv">Label12</span>.<span class="nv">Text</span> <span class="o">=</span> <span class="ss">(</span><span class="nv">FileSize</span><span class="o">/</span><span class="mi">1024</span><span class="ss">)</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="s">KB</span><span class="s2">&quot;</span><span class="c1">;</span>
        <span class="nv">Label13</span>.<span class="nv">Text</span> <span class="o">=</span> <span class="nv">FileExtension</span><span class="c1">;</span>
        <span class="o">//</span> <span class="nv">Using</span> <span class="nv">only</span> <span class="s2">&quot;</span><span class="s">.pdf</span><span class="s2">&quot;</span> <span class="nv">extension</span>, <span class="nv">but</span> <span class="nv">you</span> <span class="nv">can</span> <span class="nv">use</span> <span class="nv">all</span> <span class="nv">the</span> <span class="nv">file</span> <span class="nv">extensions</span> <span class="nv">using</span> <span class="k">if</span><span class="o">-</span><span class="k">else</span> <span class="nv">statement</span>.
        <span class="k">if</span> <span class="ss">(</span><span class="nv">FileExtension</span>.<span class="k">ToLower</span><span class="ss">()</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="s">.pdf</span><span class="s2">&quot;</span><span class="ss">)</span>
        {
            <span class="nv">Image3</span>.<span class="nv">ImageUrl</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">~//images//pdf.png</span><span class="s2">&quot;</span><span class="c1">;</span>
            <span class="nv">Label14</span>.<span class="nv">Text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="s">PDF file</span><span class="s2">&quot;</span><span class="c1">;</span>
        }
    }
</pre></div>


<p>We will discuss about our first validation (empty file validation) in our next tutorial.</p>
<hr>
  </div>
  <div class="article_meta">
    <p>Posted on: Sat 04 January 2014</p>
    <p>Category: <a href="//thegeekyway.com/category/aspnet-dot-net/">Asp.net (Dot Net)</a>
 &ndash; Tags:
      <a href="//thegeekyway.com/tag/aspnet/">asp.net</a>,      <a href="//thegeekyway.com/tag/c/">C#</a>    </p>
  </div>

  <div id="article_comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_identifier = "uploading-a-file-in-asp-part-1/";
        (function() {
             var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
             dsq.src = '//thegeekyway.disqus.com/embed.js';
             (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
         })();
    </script>
  </div>

</article>


    <div id="ending_message">
      <p>&copy; The Geeky Way. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/gfidente/pelican-svbhack" target="_blank">github</a>. </p>
      <a href="/disclaimer/">Disclaimer</a> 
      <a href="/privacy-policy/">Privacy policy</a>
    </div>
  </main>
</body>
</html>